/*!! ver.1.1 Main.js */
(function(n,t){function r(){t.cookie("LastGalleryUrl",location.pathname+location.search)}var i,u;window.adBlock=!0;i=window.location.href;i=i.toLowerCase();i.indexOf("www.jamesallen.com")==-1&&i.indexOf("jamesallen.com")>-1&&i.indexOf(".jamesallen.com")==-1&&(console.log("redirect to www.jamesallen.com"),window.location.href=window.location.href.replace(/jamesallen.com/i,"www.jamesallen.com"));n.ShoppingCartService=JSite.WebService.WSClient("ShoppingCart.asmx");n.WishListService=JSite.WebService.WSClient("WishList.asmx");n.Main=function(){function tt(i){n.Main.showMainLoader();n.WSLogin("LoginUser",{email:t("#loginWindow #loginEmail").val(),password:t("#loginWindow #loginPassword").val(),updateCartCookie:!0,updateDBShoppingcart:!1,searsStoreID:null,searsSaleRepID:null},function(r){if(r.d.IsAuthenticated==!1)return n.Main.hideMainLoader(),t("#loginPassword, #loginEmail").addClass("redBorder"),!1;JSite.Hijax.Manager.UserID=r.d.ID;JSite.ud.set(r.d);JSite.Hijax.RunAuthenticatedEvents(JSite.Hijax.Manager.UserID);var u=JA.GoogleEE.ConvertLoginObject(r.d,"signin-accountpopup");JA.GoogleEE.PushUserData(u);console.log("mobile wishlist old object needs to be fixed Main.js");alert("mobile wishlist needs to be fixed.");JSite.Hijax.Manager.Reload();i&&t("#superZoom").length&&t("#superZoom").trigger("click");n.Main.hideMainLoader()},function(){n.Main.hideMainLoader()})}function s(n){var i=d.render("SearchData",n);t("#saytRes").html(i).show()}function it(n){n.length===0?t("#saytRes").empty().hide():u[n]?s(u[n]):t.ajax({type:"GET",dataType:"jsonp",url:g+"/sayt?q="+n,success:function(i){i.length===0?t("#saytRes").empty():(u[n]=i,s(i))},error:function(n){devAlert("error: "+n.status+" "+n.statusText)}})}function h(){var i=function(n){var u={},i,r,t,f;for(i=n.split("&"),t=0,f=i.length;t<f;t++)r=i[t].split("="),u[r[0]]=r[1];return u},t=i(window.location.search.substring(1));t["open-inspiration"]?n.Main.showGalleryPopup():t["open-inspiration-item"]&&n.Main.showItemPopup(t["open-inspiration-item"])}function rt(){n.Main.IsTablet()&&t("body").removeClass("Notouch");n.Main.IsTablet()&&(t(".dropDownMenu > a").attr("href",null),t("body").addClass("Tablet"),(window.location.href.indexOf("dev.jamesallen")>0||window.location.href.indexOf("localhost")>0)&&t("body").addClass("Dev"))}function ut(){t("#searchText").on("focus",function(){t(this).parent().toggleClass("child-focus",t(this).is(":focus"));t("#saytRes").toggle(t(this).is(":focus"))});t("#searchText").bind("keypress",function(n){n.keyCode==13&&f()});t(".SearchBar .buttonContainer").click(function(){f()})}function f(){var n=t("#searchText").val();n!=""&&(window.location.href=location.protocol+"//"+location.hostname+(location.port&&":"+location.port)+"/ese/?q="+n)}function ft(){var i=new Date;i.setTime(i.getTime()+36e5);t.cookie("checkoutTempDetails",JSON.stringify(n.Checkout.checkoutTempDetails),{expires:i})}function et(n){t(n).find("*[data-gtm-event]").unbind("click",function(n){i(n,"This")});t(n).find("*[data-gtm-event]").click(function(n){i(n,"This")});t(n).find("*[data-gtm-parent-event] > *").unbind("click",function(n){i(n,"Parent")});t(n).find("*[data-gtm-parent-event] > *").click(function(n){i(n,"Parent")})}function i(n,i){i=="Parent"?dataLayer.push({event:t(n.currentTarget).parent().data("gtm-parent-event")}):dataLayer.push({event:t(n.currentTarget).data("gtm-event")})}function c(){JSite.Hijax.OnDesposeOnce(function(i){t("#WidePane").hasClass("GalleryLoader")||n.Main.showMainLoader();i.loadSwitch||window.GazitIt&&GazitIt.VideoPlayer.removeActivePlayers()})}function ot(){JSite.console.time("Google.dataLayer.push");JSite.console.time("Google.dataLayer.push 1");JA.GoogleEE.FireBasicEvents();st()||dataLayer.push({event:"page-load",url:location.pathname+location.search+location.hash});JSite.console.timeEnd("Google.dataLayer.push 1");JSite.console.time("JA.GoogleEE.FireBasicEvents");JSite.console.timeEnd("JA.GoogleEE.FireBasicEvents");JSite.console.timeEnd("Google.dataLayer.push")}function st(){for(var t=["/thank-you/","/finalizeorder/","/my-account/"],i=window.location.href.toLowerCase(),n=0;n<t.length;n++)if(i.indexOf(t[n])>-1)return!0;return!1}function ht(){if(!t.cookie("abTestFired")&&(JSite.Hijax.Manager.PageKey==="ReallyAmainzingHomepage"||JSite.Hijax.Manager.PageKey==="ReallyAmainzingHomepage2"||JSite.Hijax.Manager.PageKey==="AmainzingHomepage")){t.cookie("abTestFired",1);var i=JSite.Hijax.Manager.PageKey==="ReallyAmainzingHomepage"?"1":"2",n={testName:"Homepage - Aug17",testVariantID:i,testVariantName:JSite.Hijax.Manager.PageKey,event:"GTM test To GA"};console.log("abTestObject: ",n);dataLayer.push(n)}}function ct(){JSite.Hijax.OnError(function(i){c();console.log("Hijax Error");console.log(i);dataLayer.push({"error-request-url":i.request.url});dataLayer.push({"error-load-type":i.manager.LoadType});dataLayer.push({"error-type":i.thrownError});dataLayer.push({event:"hijax-error"});t("#hijax-error-message .error-url").html(i.request.url);t("#hijax-error-message .load-type").html(i.LoadType);t("#hijax-error-message .error-desc").html(i.thrownError);t("#WidePane").removeClass("GalleryLoader");n.Main.hideMainLoader();t.cookie("errorMessage")=="show"&&(t("#hijax-error-html .error-description").html(""),t("#hijax-error-html .error-description").html(i.xhr.responseText),t("#hijax-error-message").showPopup(),i.xhr.responseText&&i.xhr.responseText.length&&t("#hijax-error-html").showPopup())});JSite.Hijax.Manager.PageKey!=="/"?t(".motherDayHeaderBanner").show():t(".motherDayHeaderBanner").hide();window.location.href.indexOf("express-shipping/")>-1?t(".valentineDivBanner").hide():t(".valentineDivBanner").show();window.location.href.indexOf("www.jamesallen.com")<0&&t(".onlyDev").show();window.onerror=function(i){console.log("on error: ",i);t("#absoluteDiv.Visible").length||(n.Main.hideMainLoader(),t("body").removeClass("PopupOpen"))};t(".button-saleribbon").click(function(n){n.stopPropagation();t("div.SaleRibbon").toggleClass("luckSaleribbon")});n.Main.IsFirstLoad&&(n.Main.IsFirstLoad=!1,t(".Preview img").each(function(){t(this).attr("src",t(this).attr("data-src"))}),t.cookie("GameOfClues")==="true"&&(JSite.Hijax.OnGalleryLoaded=function(n){y(n)}),JSite.Hijax.OnLoad(function(){var f,e,u,r,o,s,h,l,v,a;window.RenderDeskTopCookieBar&&window.RenderDeskTopCookieBar("desktop");window.RenderCertificatePopup&&window.RenderCertificatePopup(!1);n.Functions.InitFeatureSupportElements();JA.GoogleEE.PushUserMetaData();window.RenderHeader&&window.RenderHeader({countryCode:t("body").data("location-group"),wishlistData:n.Main.wishList});n.Ripple.MaterialDesignRipple();JA.GTMEvents.Init();ot();ht();FeatureSupport.GameOfClues=="1"&&t.cookie("GameOfClues")=="true"&&(f=["DesktopNewItemPageDYO","DesktopNewItemPageDiamond","CompleteRing"],e=["ReactEngagementRingsGallery","ReactWeddingRingsGallery","LooseDiamonds","LooseDiamondsQL","ReactJamusFancyColorDiamonds","ReactFancyColorDiamondsQL","DesktopMatchingPairs","ReactGemstonesGallery","ReactGemstonesGalleryProductService","ReactGemstonePairsGallery","DesktopDesignYourOwnEarrings","DesktopDesignYourOwnPendants","DesktopDiamondStudEarringsByFeature","FineJewelryGalleryReact"],(!e.includes(JSite.Hijax.Manager.PageKey)||f.includes(JSite.Hijax.Manager.PageKey))&&setTimeout(function(){n.Main.InitGameOfClues()},100));JSite.Hijax.Manager.PageKey!=="/"?t(".motherDayHeaderBanner").show():t(".motherDayHeaderBanner").hide();window.location.href.indexOf("express-shipping/")>-1?t(".valentineDivBanner").hide():t(".valentineDivBanner").show();FeatureSupport.JSiteV!="http2"&&(u=document.getElementById("iscripts"),r=document.createElement("iframe"),r.style.display="none",r.id="iscripts",r.width=0,r.height=0,r.src="/content/modules/google/scripts.aspx?url="+JSite.Hijax.Manager.Current,o=u.parentNode,o.replaceChild(r,u));t("*[data-gtm-event]").unbind("click",function(n){i(n,"This")});t("*[data-gtm-event]").click(function(n){i(n,"This")});t("*[data-gtm-parent-event] > *").unbind("click",function(n){i(n,"Parent")});t("*[data-gtm-parent-event] > *").click(function(n){i(n,"Parent")});s=t.cookie("HideGalleryBanner")==1&&t.cookie("ImageTitle")==null;t("body").toggleClass("HideGalleryBanner",s);h=t.cookie("SearsLocation")==1;t("body").toggleClass("SearsLocation",h);l=JSite.Hijax.Manager.PageKey=="/";t("body").toggleClass("RemoveSaleSign",l);t("body").toggleClass("ChatNotAvailable",Boolean(t.cookie("ChatNotAvailable")=="true"));t(".Tablet .popup.TabletFullScreen").css("width",t(window).width()*.8+"px");v=this;n.Main.hideMainLoader();JSite.Hijax.Manager.PageKey=="ShoppingCart"&&mobileShoppingCart.CheckForSingleItems();t.cookie("ShowSpecialDiamondPopup")&&(JSite.Hijax.Manager.PageKey=="LooseDiamonds"||JSite.Hijax.Manager.PageKey=="LooseDiamondsQL")&&n.LooseDiamonds.ShowSpecialDiamondPopup();c();t(".AddMoreResults, .moreResults").exists()||t(window).unbind("scroll");n.Main.readyToRecieve=!0;JSite.Hijax.Manager.Current&&JSite.Hijax.Manager.PageKey!="City"?t("#calcFront").show():t("#calcFront").hide();(window.location.href.indexOf("dev.jamesallen.com")>-1||window.location.href.indexOf("localhost")>-1)&&t(".JMIC").removeClass("JMIC");t(".AddMoreResults").length>0&&(a=parseInt(t("#SearchPane .RingsImagesResults > li:first-child").attr("pagenumber")),a>1&&t(window).scrollTop()<=400&&t("#SearchPane .AddPrevResults").trigger("click"),t(window).scrollTop()+t(window).height()>=t(document).height()-600);t(".MenuContent.ShowContent").removeClass("ShowContent");n.Main.IsEventFirstLoad||n.JAMarketing.TrackUrlChange();n.Main.IsEventFirstLoad=!1;t(".ShowPopup").each(function(){n.Functions.ClosePopup(t(".ShowPopup .button-x"))})}));JA.GTMEvents.OnNextUrlClick()}function lt(){t("#CustomerServiceFieldsForm").validate({submitHandler:function(){l()}})}function l(i){JA.GoogleEE.UserIdentity({email:t("#csEmail").val()});var r=t("#csMessage").val();r=r+"<br /> Page Url: <a href='"+window.document.location+"' >"+window.document.location+"<\/a>";n.WS_Client("SendMessageToCustomerService",{name:t("#csName").val(),email:t("#csEmail").val(),phone:t("#csPhone").val(),message:r},function(){});t("#CustomerServiceFieldsForm").hide();i&&t("#sendMessageFields").hide();t("#sendMessageSuccess").show()}function at(){t("#csPhone").keypress(function(t){return n.Functions.IsNumberOrHyphenKey(t)})}function vt(){t("#cart a#cartLink").click(function(i){if(i.stopPropagation(),t.cookie("ShoppingCart")){try{var r=JSON.parse(t.cookie("ShoppingCart"));r.length?n.Main.showHideCart():t.cookie("ShoppingCart",null)}catch(i){t.cookie("ShoppingCart",null)}i.preventDefault()}})}function yt(i,r){var u,f;if(i.length>0){if(n.Login.updateShoppingcartCookie(),n.Main.cartDetails=JSON.parse(i),!n.Main.cartDetails.Cart||!n.Main.cartDetails.Cart.Jewels){n.Main.createCartWindow();return}if(t.isArray(n.Main.cartDetails.Cart.Jewels.Jewel))for(u=0;u<n.Main.cartDetails.Cart.Jewels.Jewel.length;u++)for(f in n.Main.cartDetails.Cart.Jewels.Jewel[u].RingSize.JewelDiamondRange)n.Main.cartDetails.Cart.Jewels.Jewel[u].RingSize.JewelDiamondRange[f]&&(shape=n.Main.cartDetails.Cart.Jewels.Jewel[u].RingSize.JewelDiamondRange[f]["@Shape"],minCarat=n.Main.cartDetails.Cart.Jewels.Jewel[u].RingSize.JewelDiamondRange[f]["@MinCarat"],maxCarat=n.Main.cartDetails.Cart.Jewels.Jewel[u].RingSize.JewelDiamondRange[f]["@MaxCarat"],shape||(shape=n.Main.cartDetails.Cart.Jewels.Jewel[u].RingSize.JewelDiamondRange["@Shape"],minCarat=n.Main.cartDetails.Cart.Jewels.Jewel[u].RingSize.JewelDiamondRange["@MinCarat"],maxCarat=n.Main.cartDetails.Cart.Jewels.Jewel[u].RingSize.JewelDiamondRange["@MaxCarat"]),n.Main.cartDetails.Cart.Jewels.Jewel[u][shape]={minCarat:minCarat,maxCarat:maxCarat});else for(f in n.Main.cartDetails.Cart.Jewels.Jewel.RingSize.JewelDiamondRange)n.Main.cartDetails.Cart.Jewels.Jewel.RingSize.JewelDiamondRange[f]&&(shape=n.Main.cartDetails.Cart.Jewels.Jewel.RingSize.JewelDiamondRange[f]["@Shape"],minCarat=n.Main.cartDetails.Cart.Jewels.Jewel.RingSize.JewelDiamondRange[f]["@MinCarat"],maxCarat=n.Main.cartDetails.Cart.Jewels.Jewel.RingSize.JewelDiamondRange[f]["@MaxCarat"],shape||(shape=n.Main.cartDetails.Cart.Jewels.Jewel.RingSize.JewelDiamondRange["@Shape"],minCarat=n.Main.cartDetails.Cart.Jewels.Jewel.RingSize.JewelDiamondRange["@MinCarat"],maxCarat=n.Main.cartDetails.Cart.Jewels.Jewel.RingSize.JewelDiamondRange["@MaxCarat"]),n.Main.cartDetails.Cart.Jewels.Jewel[shape]={minCarat:minCarat,maxCarat:maxCarat});r&&r();n.Main.createCartWindow()}}function e(n,t){JSite.Hijax.Manager.Container="#WidePane";JSite.Hijax.Manager.Load(t)}function a(){var i=navigator.userAgent,r=i.match(/iPad/i);t("#centerDiamondRequired #settings").click(function(){JSite.Hijax.Manager.Load("/engagement-rings/solitaire/?ISDiamondRequired=0")});t("#centerDiamondRequired #diamonds").click(function(){var r=t("#centerDiamondRequired").attr("itemID"),i=t("#centerDiamondRequired").attr("match"),u="/loose-diamonds/all-diamonds/";r&&i?(n.Main.removeItem(r,i,!0,u),e(i,null)):JSite.Hijax.Manager.Load(u);n.Functions.ClosePopup(t("#centerDiamondRequired .button-x"))});t("#centerDiamondRequired #gemstones").click(function(){var r=t("#centerDiamondRequired").attr("itemID"),i=t("#centerDiamondRequired").attr("match"),u="/gemstones/all-gemstones/";r&&i?(n.Main.removeItem(r,i,!0,u),e(i,null)):JSite.Hijax.Manager.Load(u);n.Functions.ClosePopup(t("#centerDiamondRequired .button-x"))})}function v(){t("#DiamondIsNotAvailable .diamonds").click(function(){n.Functions.ClosePopup(t("#DiamondIsNotAvailable .button-x"));t("#greyOut").queue(function(){JSite.Hijax.Manager.Container="#WidePane";JSite.Hijax.Manager.Load("/loose-diamonds/all-diamonds/");t(this).dequeue()})});t("#DiamondIsNotAvailable .pairs").click(function(){n.Functions.ClosePopup(t("#DiamondIsNotAvailable .button-x"));t("#greyOut").queue(function(){JSite.Hijax.Manager.Container="#WidePane";JSite.Hijax.Manager.Load("/gemstones/all-gemstones/");t(this).dequeue()})});t("#DiamondIsNotAvailable .engagement").click(function(){n.Functions.ClosePopup(t("#DiamondIsNotAvailable .button-x"));t("#greyOut").queue(function(){JSite.Hijax.Manager.Container="#WidePane";JSite.Hijax.Manager.Load("/engagement-rings/all-settings/");t(this).dequeue()})});t("#DiamondIsNotAvailable .contactUs").click(function(){n.Functions.ClosePopup(t("#DiamondIsNotAvailable .button-x"));t("#greyOut").queue(function(){JSite.Hijax.Manager.Container="#WidePane";t("#customerServicePop").showPopup();t(this).dequeue()})})}function pt(){n.Checkout.DeletePayPalInfo();var t;t="https://www.jamesallen.com/shop_bag_billing/";window.location.href.indexOf("localhost")>0?t="shop_bag_billing/":FeatureSupport.IsStore=="True"&&(t="fast-checkout/");n.Main.showMainLoader();n.Checkout.CheckAvailableCartDiamonds(t)}function wt(){dataLayer.push({event:"OpenHomePageYouTubePopUp"});t("#YouTubePopup").showPopup()}function bt(){window.RemoveNode&&window.RemoveNode(document.querySelector(".YouTubePopupContent"))}function kt(n){var i=t("#"+n).data("img-src");t("#"+n).find("img[data-lazy-img]").attr("src",i);t("#"+n).showPopup()}function y(i){if(t.cookie("GameOfClues")){var r=JSite.Hijax.Manager.PageKey,f=t("#ItemData").attr("data-special-diamond"),e=r!=="CompleteRing"?window.product&&window.product.stone&&window.product.stone.isLabDiamond:dt(),u={funnel:{diamond:t.cookie("match_ring_diamond")!==null,ring:t.cookie("match_ring_jewel")},pageKey:r,queryString:window.location.search,filteredParams:i,dataSpecialDiamond:f,dataIsLabDiamond:e,setPhaseUrlFunc:JSite.Hijax.Manager.Load.bind(JSite.Hijax.Manager),device:"desktop",deleteCookie:n.Main.DeleteCookieByName,fbShareFunc:n.Main.FbShare.bind(n.Main.FbShare),twitterShareFunc:n.Main.TwitterShare.bind(n.Main.TwitterShare),dataLayerFunc:dataLayer.push.bind(dataLayer),updateEmarsys:n.Main.UpdateEmarsysWinner.bind(n.Main.UpdateEmarsysWinner),updateBlueShift:n.Main.UpdateBlueShiftWinner.bind(n.Main.UpdateBlueShiftWinner)};console.log("GameOfCluesObj : ",u);window.RenderGameOfClues&&window.RenderGameOfClues(u,document.querySelector("#GameOfClues"))}}function dt(){var n=!1;return t(".ItemRowLine  #ItemData").each(function(){t(this).data("is-lab-diamond")=="1"&&(n=!0)}),n}function gt(){var t={video:"4G9MFVG5YVU",autoplay:"1",rel:"0",modest:"0",stopVideo:n.Main.CloseYouTubePopup.bind(this)};window.RenderMediaPlayer&&window.RenderMediaPlayer(t,document.querySelector(".YouTubePopupContent"))}function p(n,i){n.map(function(n){t.cookie(n,null)});var r=i?i:"/";JSite.Hijax.Manager.Load(r)}function ni(i){var r=t.cookie("GOCemail");n.WSEmarsys("UpdateFinishedChallange",{email:r},function(n){n.d!=null&&n.d!=""&&p(["GOCemail"],i)})}function ti(){var i=t.cookie("GOCemail"),r=sessionStorage.getItem("gocSender"),u=(new Date).toLocaleString("en-US",{timeZone:"America/New_York"}),f={Challenge_Ended:u};return new Promise(function(u,e){try{return n.WSBlueshift("SubscribeToBlueshiftWithParams",{email:i,first:"",last:"",gender:"",sender:r,optionals:JSON.stringify(f)},function(n){if(n.d!=null&&n.d!="")return t.cookie("GOCemail",null),sessionStorage.setItem("gocSender",null),u()})}catch(o){return e(o)}})}function ii(n,t,i,r,u,f){var e=screen.height/2-f/2,o=screen.width/2-u/2;window.open("https://www.facebook.com/sharer/sharer.php?u="+n+"&picture="+r+"&title="+t+"&caption=JamesAllen.com&quote=&description="+i,"sharer","top="+e+",left="+o+",toolbar=0,status=0,width="+u+",height="+f)}function ri(n,i,r,u,f,e){var o=screen.height/2-e/2,s=screen.width/2-f/2;window.open("https://twitter.com/intent/tweet?url="+n+"&text="+r+"&hashtags=RaceToTheRock","twitterwindow","height=450, width=550, top="+(t(window).height()/2-225)+", left="+t(window).width()/2+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")}function ui(n,i){t(i).html(n)}function fi(n,i,r,u,f){var s=r,e=t.extend(!0,{},JA.Video.Settings[s]),o=navigator.userAgent,h;(o.indexOf("iPad")>-1||o.indexOf("iPhone")>-1||o.indexOf("Android")>-1)&&(e.server.setsNum=8);e.server.folder=i;e.server.url="//ion.r2net.com/";e.invertRotate=!1;e.target.id=n.getAttribute("id");e.onStartMove=u;e.onSetsLoad=f;GazitIt.VideoPlayer.removeSinglePlayer(n.getAttribute("id"));h=GazitIt.VideoPlayer.createNewVideoplayer(e)}function ei(i,r,u,f,e,o,s,h){var l,w;JA.GoogleEE.UserIdentity({email:i});for(var o=o||"NewsletterSignUpPage",v=n.Functions.GetQueryObject(),a,y=Object.keys(v),p=y.length,c={};p--;)a=y[p],c[a.toLowerCase()]=v[a];l=c.hasOwnProperty("km_source");w=c.hasOwnProperty("utm_source");(l||w)&&(l=l?c.km_source:c.utm_source,o=o+" - "+l);n.WSAccount("SignupForEmailPageLocalDB",{email:i,ageCategory:null,gender:r,maritalStatus:null,firstName:u,lastName:f,source:o,birthday:e},function(){h?h():(s===undefined||s)&&t("#thanxRegisterPop").showPopup()});n.WSEmarsys("SubscribeToEmarsysSignUpPage",{email:i,first:u,last:f,gender:r,sender:o,dateOfBirth:e},function(n){if(n.d!=null&&n.d!=""){var i=t.parseJSON(n.d);i.Sender||(i.Sender=o?o:"");JA.GoogleEE.PushUserData(i)}})}function w(i,r,u,f){var r=r||t("#signupEmail").val();JA.GoogleEE.UserIdentity({email:r});var e=f!==undefined&&f!==null?f:t(this).closest("#signUpForm").data("sender")||"SubscribeToNewsletter",s=o("AgeCategory",null),u=u||o("Gender",this.name),h=o("MaritalStatus",null);n.WSAccount("SignupForEmailLocalDB",{email:r,ageCategory:s,gender:u,maritalStatus:h,source:e},function(){});t("#thanxRegisterPop").showPopup();t("#signupEmail").css("color","#BDBDBD");n.WSEmarsys("SubscribeToEmarsys",{email:r,first:"",last:"",gender:u,sender:e},function(n){if(n.d!=null&&n.d!=""){var i=t.parseJSON(n.d);JA.GoogleEE.PushUserData(i)}});n.Main.RegisterSignupForExcDlsEvent(u);dataLayer.push({gender:u})}function oi(){t(".signUpFormFootersbtn").click(w)}function o(n,i){var r=t("#"+n).val();return typeof r=="undefined"?i:r}function b(){t("#AddAnotherFriend").click(function(){var n=t(".sendToFriendsOpening").length+1,i='<div class="AditionalFriend"><span style="float:left"><h4>*Friend’s Name<\/h4><input type="text"  id="friendName'+n+'" name="friendName'+n+'"  style="width:145px !important" class="required  sendToFriendsOpeningRefer"><\/input><\/span><span  style="float:left;margin-left:20px" Id="AdditionalBlock"><h4>*Friend’s Email<\/h4><input type="text"  id="friendEmail'+n+'" name="friendEmail'+n+'"  style="width:145px !important" class="required email sendToFriendsOpeningRefer"><\/input><input type="button" class="customerSendToFriendsRemove" onclick="$(this).parent().parent().remove()"><\/input><\/span><\/div>';t("#LineItem").last().after(i)})}function si(){t("#sendItemPageForm").validate({rules:{yourName:"required",friendMail:{required:!0,email:!0},yourMail:{required:!0,email:!0}},errorPlacement:function(n,t){t.parent().hasClass("AdditionalEmail")&&t.attr("id")!="friendMail"?n.insertAfter(t.next(".customerSendToFriendsRemove")):n.insertAfter(t)},submitHandler:function(){hi()}});b()}function hi(){var i="",r="",f,u;len=t('input[id^="friendEmail"], input[id^="friendMail"]').length;t('input[id^="friendEmail"], input[id^="friendMail"]').each(function(n){i+=n==len-1?t(this).val():t(this).val()+", "});len=t('input[id^="friendName"]').length;t('input[id^="friendName"]').each(function(n){r+=n==len-1?t(this).val():t(this).val()+", "});JA.GoogleEE.UserIdentity({email:t("#yourMail").val(),to:i});window.location.toString().indexOf("/sr")!=-1?(f=t("#soldEmailIcon").attr("code"),t(".sendToFriendsOpening ").each(function(){var i=window.location.href.toString();n.WS_Client("SendSoldRingFromFriend",{toMail:t(this).val(),toName:t("#yourName").val(),url:i,fromMail:t("#yourMail").val(),ImagCode:f,src:"sre"})})):window.location.toString().indexOf("Compare")!=-1?n.WS_Client("SendCompare",{to:i,senderName:t("#yourName").val(),from:t("#yourMail").val(),message:t("#itemMessage").val(),link:""}):window.location.toString().indexOf("wishlist")!=-1?(u=window.location.toString().indexOf("JewelIDs")!=-1,n.WS_Client("SendWishList",{friendMail:i,yourName:t("#yourName").val(),yourMail:t("#yourMail").val(),message:t("#itemMessage").val(),isFriendsWishlist:u,friendName:r})):window.location.toString().indexOf("complete-jewel")!=-1?n.WS_Client("SendCompleteToFriend",{friendMail:i,friendName:r,yourName:t("#yourName").val(),yourMail:t("#yourMail").val(),message:t("#itemMessage").val(),isFriendsWishlist:u}):ci(i,r);t("#systemMessage").showPopup();t("#systemMessage").queue(function(){n.Functions.ClosePopup(t("#customerSendToFriends .button-x"));t(this).dequeue()});t(".AdditionalEmail:not(:first)").remove()}function ci(i,r){var f=t("#ItemData"),u,e,o,s;t("#SoldRingItem").exists()&&n.WS_Client("SendItemPage",{friendMail:i,yourName:t("#yourName").val(),yourMail:t("#yourMail").val(),message:t("#itemMessage").val(),item1:{itemID:"",pageUrl:JSite.Hijax.Manager.Current,description:"",price:"",imgPath:t("#soldPreloaderImg").attr("src").replace("Img.Stg_473X375.jpg","Img.Tab_129X102.jpg"),diamondsTitles:"",itemType:"Ring"},item2:null},null);t("#SoldRingInnerGI").exists()?n.WS_Client("SendItemPage",{friendMail:i,friendName:r,yourName:t("#yourName").val(),yourMail:t("#yourMail").val(),message:t("#itemMessage").val(),item1:{itemID:t("#JewelID").val(),pageUrl:location.href,description:t("#JewelInfo").text()+" "+t("#ChosenDiamondInfo").text(),price:e=="",imgPath:"https://ion.r2net.com/Sets/"+t("#SoldCodeInp").val()+"/Img.Stg_473X375.jpg",diamondsTitles:t("#ChosenDiamondInfo").text(),itemType:"ring"},item2:null},null):(u=t("#customerSendToFriends").attr("isWiz")=="true",u&&t("#customerSendToFriends").attr("isWiz","false"),e=u?parseInt(t("#ringDetails").attr("price"))+parseInt(t("#diamondDetails").attr("price")):t("#ItemID").attr("price"),o=null,t("#ItemID2").length>0&&(s=t("#ItemID2").attr("price"),o={itemID:t("#ItemID2").attr("value"),pageUrl:t("#ItemID2").attr("url"),description:t("#ItemID2").attr("title"),price:s==""?"":n.Functions.AddCommas(Math.round(s).toFixed(0)),imgPath:t("#ItemID2").attr("smallpic"),diamondsTitles:t("#ItemID2").attr("diamondsTitles")||"",itemType:t("#ItemID2").attr("itemType")}),n.WS_Client("SendItemPage",{friendMail:i,friendName:r,yourName:t("#yourName").val(),yourMail:t("#yourMail").val(),message:t("#itemMessage").val(),item1:{itemID:u?t("#ringDetails").attr("jewelid"):f.data("item-id").toString(),pageUrl:u?location.href:f.data("url"),description:u?t("#ringDetails").attr("jatitle"):f.data("title"),price:e==""?"":n.Functions.AddCommas(Math.round(e).toFixed(0)),imgPath:u?"https://www.jamesallen.com/"+t("#ringDetails").attr("pic"):f.data("pic"),diamondsTitles:f.data("title")||"",itemType:u?"ring":f.data("item-type")},item2:o},null),dataLayer.push({event:"item-page-mail-sent"}),t('input[class^="addMailingList"]').is(":checked")&&n.WSEmarsys("SubscribeToEmarsys",{email:t("#yourMail").val(),first:t("#yourName").val(),last:"",gender:"",sender:"SharedItemPage"},function(n){if(n.d!=null&&n.d!=""){var i=t.parseJSON(n.d);i.Sender="signup-SharedItemPage";JA.GoogleEE.PushUserData(i)}}),t("#sendItemPageForm").trigger("reset"))}function li(i){t(".HeaderButtons").children().length||document.querySelector(".HeaderButtons")&&JSite.Hijax.Manager.LoadAjax("cart-dropdown/",".HeaderButtons",function(){vt();n.Main.initWishListCount();i&&i()})}function ai(n){var i=t("#svgLoadingAnimation").html();t(n).append(i)}function vi(n){t(n).empty()}function yi(){function l(){}function y(){setTimeout(function(){document.body.style.height=screen.width<=980?window.innerHeight+"px":""},0)}var u,f,i,c;window.RenderDeskTopCookieBar&&window.RenderDeskTopCookieBar("desktop");window.RenderCertificatePopup&&window.RenderCertificatePopup(!1);FeatureSupport.covidNY=="1"&&n.Functions.OpenCovidPopup("COVID-NY",!1);u=["/"];FeatureSupport.GameOfClues=="1"&&u.indexOf(JSite.Hijax.Manager.PageKey)>-1&&n.Main.InitGameOfClues();window.RenderHeader&&window.RenderHeader({countryCode:t("body").data("location-group"),wishlistData:n.Main.wishList});t("html").click(function(i){t("#selectCurrencyOptions").fadeOut();t(i.target).closest(".InputContainer").length||(t(".SearchBar").removeClass("child-focus"),t("#saytRes").hide());t(i.target).closest("#cart").length||t(i.target).closest("#btnAddToCart").length||t(i.target).hasClass("moreResults")||(n.Main.showHideCart(!1),window.RenderHeader&&window.RenderHeader({bagContainerStatus:!1,countryCode:t("body").data("location-group"),wishlistData:n.Main.wishList}));t(i.target).closest(".MenuLink").length||t(".MenuContent.ShowContent").removeClass("ShowContent")});dataLayer.push({SiteType:"d"});try{n.Main.shoppingCart=t.cookie("ShoppingCart")?t.parseJSON(t.cookie("ShoppingCart")):[]}catch(p){n.Main.shoppingCart=[]}if(!1&&window.location.href.indexOf("localhost")>-1){f=Boolean(screen.width>1024&&screen.height>768)?!0:!1;t(document).on("scroll",function(){var i=t(".PagingHeader").length,r=t(this).scrollTop()>1;n.Main.initSticky(Boolean((r||i)&&f))})}t(document).on("ftr:customerWebIdReady",function(n,i){t("body").data("customerWebID",i);t(".customerWebID").attr("customerWebID",t("body").data("customerWebID"));t("[data-customerwebid]").attr("data-customerwebid",t("body").data("customerwebid"));dataLayer.push({customerWebID:t(".customerWebID").attr("customerwebid")})});try{n.Main.wishList=t.parseJSON(t.cookie("MobileWishlist"))||[]}catch(p){n.Main.wishList=[];console.log("Wishlist cookie error2")}var e=FeatureSupport.JSiteV=="http2",o=FeatureSupport.JSiteV=="http2-3p",s="Version: "+document.body.getAttribute("data-version"),r="Http2 Version: "+document.body.getAttribute("data-mini-version");if(s+=!e&&!o?' - <i style="font-weight: bold;font-style: normal;color: red;"> Active <\/i>':"",r+=e?' - <i style="font-weight: bold;font-style: normal;color: red;"> Active <\/i>':"",r+=o?' - <i style="font-weight: bold;font-style: normal;color: red;"> Active - 3rdParty<\/i>':"",t(".top-header-js").click(function(n){n.ctrlKey&&n.altKey&&(t("#general-info .info-iis-server").html("IIS Server: "+t('meta[type="server"][val]').attr("val")),t("#general-info .info-version").html(s),t("#general-info .info-version-mini-ver").html(r),t("#general-info").showPopup())}),t(".top-header-js > ul").click(function(){t("#riskFreePop").showPopup()}),t(".top-header-js > ul .countdown-discount").click(function(t){t.stopPropagation();JSite.Hijax.Manager.Container="#WidePane";n.Main.ShowBannerPopup("bannerVal2017")}),t(".top-header-js > ul .motherDayHeaderBanner").click(function(t){t.stopPropagation();JSite.Hijax.Manager.Container="#WidePane";n.Main.ShowBannerPopup("bannerDiv3")}),t(".top-header-js > ul li .valentineDivBanner").click(function(n){n.stopPropagation()}),t.cookie("SetSaleIcon")==1&&t("#cyberLogo").attr("style","display:block !important;visibility:visible !important;"),n.AIFunctions&&(n.AIFunctions.SetSaleIcon=function(){var n=new Date;n.setTime(n.getTime()+18e5);t.cookie("SetSaleIcon",1,{expires:n});t("#cyberLogo").attr("style","display:block !important;visibility:visible !important;")}),t("body").removeClass("DisableScroll"),t("#cyberLogo").click(function(){t("#ValPopup1").showPopup()}),t("#SalePopup a img").click(function(){n.Functions.ClosePopup(t("#SalePopup .button-x"))}),t("#absoluteDiv").click(function(){}),t(".ChatNow").click(function(){dataLayer.push({event:"chat-now-top"})}),n.Main.GalleryVideoMoved={},t(".LogoLink").click(function(t){if(t.ctrlKey)return n.Main.showGalleryPopup(),!1}),mobileShoppingCart.LoadFromCookie(),n.Main.IsTablet()&&t("#wizOuterWrap").hide(),ct(),n.Main.initButtons(),n.Main.initCartIndex(),at(),n.Main.InitTextInput(),ut(),n.Checkout.GetUserDetails(),n.Main.clearDragAndDropCookie(),oi(),t("#greyOut").click(function(){if(!t(this).hasClass("Disabled")){if(t(this).siblings("#GOCPopupTermsAndConditionsPopup").hasClass("ShowPopup")&&t("body").css({overflow:""}),t("#wizWrap").is(":visible")){t("#closeWizConfirm").showPopup();t("#wizIcon").show();return}if(t("#BigImage").is(":visible")&&n.LooseDiamonds.ClearBigPhotoDetails(),!t(".KeepGrey").is(":visible")){var i=0,r=t(".popup:visible").not("#closeWizConfirm").first();t(".popup:visible").not("#closeWizConfirm").each(function(){var n=t(this).css("z-index");n>i&&(i=n,r=this)});n.Functions.ClosePopup(t(r).find(".button-x"))}t(".BackToHomePage").is(":visible")&&(n.Functions.ClosePopup(t(".button-x")),n.Functions.CloseSecondPopup(t(".sendButton")),JSite.Hijax.Manager.Container="body",JSite.Hijax.Manager.Load(""));imagesTimer&&clearInterval(imagesTimer)}}),n.Main.IsTablet()&&t(".draggable").removeClass("draggable"),n.Main.initWishListPopup(),b(),t.cookie("RegionalDiscoutCode")||n.WS_Client("SetRegionalDiscountCodeCookie"),rt(),t(".Tablet .TopMenu li.dropDownMenu").click(function(){t(this).toggleClass("hovered")}),i=navigator.userAgent.toLowerCase(),c=i.indexOf("android")>-1||i.indexOf("linux")>-1&&i.indexOf("applewebkit")>-1,c&&(t("#body1 > div").css("overflow","auto"),t("body").addClass("Android")),n.Main.InitMyAccountSection(),v(),a(),n.Main.initButtons(),n.Main.initLoginDiv(),JA.ItemStage&&!JA.ItemStage.IsPopupsLoaded&&(JA.ItemStage.ZoomingCertificate(),JA.ItemStage.InitAddToCartPopupBtns(),JA.ItemStage.IsPopupsLoaded=!0),window.FB&&fbAsyncInit(),JSite.Hijax.Manager.PageKey=="ShoppingCart"&&mobileShoppingCart.CheckForSingleItems(),h(),["DiamondItem2","DesktopNewItemPageDiamond","Login","DesktopNewItemPageDiamondPair","DiamondsPair","DesktopNewItemPageGemstonePair","GemstoneItem2","GmstoneCert","JewelItem2","WideRingItem","Checkout"].indexOf(JSite.Hijax.Manager.PageKey)>-1)l();else t("html").one("click",l);t(".WideBody.Tablet .Menu .MenuLink").click(function(){t(".WideBody .Menu .MenuLink").not(this).removeClass("ShowContent");t(this).toggleClass("ShowContent")});(window.location.href.indexOf("localhost")>-1||window.location.href.indexOf("dev.")>-1)&&t(".DevOnly").show();y();window.addEventListener("orientationchange",y)}function pi(){var t=" -webkit- -moz- -o- -ms- ".split(" "),i=function(n){return window.matchMedia(n).matches},n;return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?!0:(n=["(",t.join("touch-enabled),("),"heartz",")"].join(""),i(n))}function wi(){if(typeof yotpo!="undefined")yotpo.refreshWidgets();else t.getScript("//staticw2.yotpo.com/RLOoEg0xO4AvRBF4lqaFJ6yuGCrO106z5mA8fsv9/widget.js").done(function(){yotpo.initWidgets()}).fail(function(){console.log("Failed To Load Script")})}function bi(n){var t=n.charAt(n.length-1);return(jewelTypes=[],jewelTypes.R="Diamond In The Rough",jewelTypes.M="Mille Coeurs Collection",jewelTypes.J="Diamond Jewelry",jewelTypes.N="Wedding Ring",jewelTypes.P="Pendant",jewelTypes.S="Studs",!(t in jewelTypes))?"Setting":jewelTypes[t]}function ki(){return t.cookie("IsTablet")||/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)}var k={SignupForEmailsHandler:w,SignupForEmailsPageHandler:ei,InitGtmLoadajax:et,GetSearchData:it,IsFirstLoad:!0,IsEventFirstLoad:!0,InitCsForm:lt,InitSendItemPageForm:si,SearchRedirect:f,OpenLiverPersonChat:function(){CS.Chat.toggle()},GoToCheckout:pt,ShowYouTubeVideoPopup:wt,FbShare:ii,TwitterShare:ri,CloseYouTubePopup:bt,InitYouTubePlayer:gt,DeleteCookieByName:p,UpdateEmarsysWinner:ni,UpdateBlueShiftWinner:ti,ChangeReactText:ui,InitReactCanvas:fi,InitGameOfClues:y,CheckInspirationAutoPopup:h,GetJewelType:bi,IsTablet:ki,SaveLastGallery:r,InitMyAccountSection:li,SetNewLoader:ai,RemoveNewLoader:vi,InitMain:yi,IsTouchDeviceV2:pi,CluesFiltersObj:{},ShowBannerPopup:function(n){kt(n)},InitDiamondNoLongerAvailable:v,HtmlClick:a,PopupLogin:tt,InitYotpoWidget:wi,NotMatchContinue:function(){switch(t("#DoNotMatch").data("item").type){case"Ring":JSite.Hijax.Manager.Load("engagement-rings/all-settings/");break;case"Diamond":JSite.Hijax.Manager.Load("loose-diamonds/all-diamonds/")}},ApplyFinancing:function(){window.open("/Financing.aspx")},TrackFacebookShare:function(){devAlert(targetUrl);FB.Event.subscribe("message.send",function(){})},ItemsList:new function(){function r(){var n=window.location.pathname;return n.substring(1,n.lastIndexOf("/")+1)}function u(){return window.location.href.indexOf("fancy-color")>-1}function e(){return window.location.href.indexOf("OSapphire")>-1||window.location.href.indexOf("GSapphire")>-1}function f(){return e()?"gemstones/all-gemstones/":r()}function o(n){var t=r()+(n&&n.isLabDiamond?"?IsLabDiamond=True":"");return u()?n&&n.isLabDiamond?"fancy-color-diamonds/lab-created-diamonds/":"fancy-color-diamonds/":n&&n.isLabDiamond?"loose-diamonds/lab-created-diamonds/":t}function s(n){return n&&n.isLabDiamond?"loose-diamonds/lab-created-matching-diamond-pairs/":"matching-pairs/all-diamonds/"}function h(n){return u()?n.isLabDiamond?["fancy-color-diamonds/","loose-diamonds/all-diamonds/"]:"fancy-color-diamonds/":"loose-diamonds/all-diamonds/"}function i(n,i,r,u,f,e,o,s,h){r=r?r:i;this.charID=n;this.groupCategoryID=r;this.categoryID=i;this.cartTitle=u;this.reversRotate=f;this.diamondMatchType=e;this.defaultGallery=o;this.isUnique=s;this.isPair=function(){return this.categoryID==996||this.charID=="A"};this.isSingleItem=function(){return t.inArray(this.groupCategoryID,[2,999,998,997,996,502,498,526])==-1};this.matchToSingleDiamondGemstone=function(){return this.groupCategoryID==2||this.categoryID==502};this.isSetting=function(){return this.groupCategoryID==2};this.isDiamondOrGemstone=function(){return this.categoryID==999||this.categoryID==997};this.isGemstonePair=function(){return this.categoryID==996};this.isDiamondPair=function(){return this.categoryID==998};this.getFinishDesignText=function(){switch(this.categoryID){case 502:return"Your pendant was successfully designed.";case 498:return"Your studs were successfully designed.";default:return"Your ring was successfully designed."}};this.hasRingSize=function(){return t.inArray(this.groupCategoryID,[2,3,511,518,526,564,565,566])!=-1};this.defaultGallery=typeof o=="function"?o:""+o;this.isUnique=s;this.showRingSize=function(){};this.parentGallery=h}this.getItemDetailsByItemID=function(n){var i,t;if(n)for(i=this.getCategoryIDByItemID(n),n.toString().indexOf("A")>-1&&(i=998),t=0;t<this.list.length;t++)if(i==this.list[t].categoryID)return this.list[t]};this.getCategoryIDByItemID=function(t){var i=n.Main.getItemDetails(t,"Jewel");return i||(i=n.Main.getItemDetails(t,"Diamond")),i||(i=n.Main.getItemDetails(t,"Gemstone")),i?i["@categoryID"]:void 0};this.getDetailsByCategoryID=function(n){for(var t=0;t<this.list.length;t++)if(n==this.list[t].categoryID)return this.list[t]};this.list=[];this.list.push(new i("C",996,null,"Gemstone Matched Pair",!0,0,f,!0,"gemstones/matching-pairs/all-gemstones/"));this.list.push(new i("G",997,null,"Gemstone",!0,0,f,!1,"gemstones/all-gemstones/"));this.list.push(new i("D",999,null,"Diamond",!0,0,o,!1,h));this.list.push(new i("A",998,null,"Diamond",!0,0,s,!0));this.list.push(new i("E",2,2,"Setting",!0,1,"/engagement-rings/all-settings/",!1,"engagement-rings/all-settings/"));this.list.push(new i("",12,2,"Setting",!0,1,"/engagement-rings/solitaire/",!1,"engagement-rings/all-settings/"));this.list.push(new i("",263,2,"Setting",!0,1,"/engagement-rings/pave/",!1,"engagement-rings/all-settings/"));this.list.push(new i("",265,2,"Setting",!0,1,"/engagement-rings/channel-set/",!1,"engagement-rings/all-settings/"));this.list.push(new i("",13,2,"Setting",!0,1,"/engagement-rings/side-stones/",!1,"engagement-rings/all-settings/"));this.list.push(new i("",122,2,"Setting",!0,1,"/engagement-rings/three-stone/",!1,"engagement-rings/all-settings/"));this.list.push(new i("",233,2,"Setting",!0,1,"/engagement-rings/mixed-metal/",!1,"engagement-rings/all-settings/"));this.list.push(new i("",345,2,"Setting",!0,1,"/engagement-rings/tension/",!1,"engagement-rings/all-settings/"));this.list.push(new i("",491,2,"Setting",!0,1,"/engagement-rings/halo/",!0,"engagement-rings/all-settings/"));this.list.push(new i("",492,2,"Setting",!0,1,"/engagement-rings/vintage/",!1,"engagement-rings/all-settings/"));this.list.push(new i("",14,2,"Setting",!0,1,"/engagement-rings/wedding-sets/",!0,"engagement-rings/all-settings/"));this.list.push(new i("",493,2,"Setting",!0,1,"/engagement-rings/unique/",!0,"engagement-rings/all-settings/"));this.list.push(new i("",583,2,"Setting",!0,1,"/engagement-rings/custom-engagement-rings/",!0,"engagement-rings/custom-engagement-rings/"));this.list.push(new i("",564,null,"Rings",!1,0,"/fashion-rings/diamond-rings/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",565,null,"Rings",!1,0,"/fashion-rings/gemstone-rings/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",566,null,"Rings",!1,0,"/fashion-rings/pearl-rings/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",567,null,"Bracelets",!1,0,"/bracelets/tennis-bracelets/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",568,null,"Bracelets",!1,0,"/bracelets/diamond-bracelets/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",569,null,"Bracelets",!1,0,"/bracelets/gemstone-bracelets/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",570,null,"Bracelets",!1,0,"/bracelets/pearl-bracelets/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",571,null,"Necklaces",!1,0,"/necklaces/diamond-pendants/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",572,null,"Necklaces",!1,0,"/necklaces/diamond-necklaces/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",573,null,"Necklaces",!1,0,"/necklaces/gemstone-necklaces/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",574,null,"Necklaces",!1,0,"/necklaces/pearl-necklaces/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",576,null,"Earrings",!1,0,"/earrings/diamond-earrings/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",577,null,"Earrings",!1,0,"/earrings/gemstone-earrings/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",578,null,"Earrings",!1,0,"/earrings/pearl-earrings/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",579,null,"Rings",!1,0,"/birthstone-jewelry/",!1,"fine-jewelry/all-jewels/"));this.list.push(new i("",531,2,"Setting",!0,1,"/engagement-rings/danhov/",!1,"engagement-rings/all-settings/"));this.list.push(new i("",532,2,"Setting",!0,1,"/engagement-rings/jeff-cooper/",!1,"engagement-rings/all-settings/"));this.list.push(new i("",533,2,"Setting",!0,1,"/engagement-rings/martin-flyer/",!1,"engagement-rings/all-settings/"));this.list.push(new i("",534,2,"Setting",!0,1,"/engagement-rings/verragio/",!1,"engagement-rings/all-settings/"));this.list.push(new i("M",511,null,"Mille Coeurs Collection",!1,0,"/preset-engagement-rings/designer-gemstone-rings/",!0));this.list.push(new i("R",510,null,"Diamond In The Rough",!1,0,"/preset-engagement-rings/diamond-in-the-rough/",!0));this.list.push(new i("R",518,null,"Royal Halo Rings",!1,0,"/fashion-rings/diamond-rings/",!0));this.list.push(new i("R",521,null,"Tuscan Ring Collection",!1,0,"/preset-engagement-rings/designer-fancy-color-rings/",!0));this.list.push(new i("R",522,null,"Tuscan Earring Collection",!1,0,"/earrings/designer-fancy-color-earrings/",!0));this.list.push(new i("R",523,null,"Tuscan Pendant Collection",!1,0,"/pendants/designer-fancy-color-pendants/",!0));this.list.push(new i("",336,3,"Wedding Ring",!0,0,"/wedding-rings/womens-classic/",!1));this.list.push(new i("",524,3,"Wedding Ring",!0,0,"/wedding-rings/mens-classic/",!1));this.list.push(new i("",337,3,"Wedding Ring",!1,0,"/wedding-rings/womens-stackable/",!1));this.list.push(new i("",338,3,"Wedding Ring",!0,0,"/wedding-rings/womens-diamond/",!1));this.list.push(new i("",496,3,"Wedding Ring",!0,0,"/wedding-rings/womens-anniversary/",!1));this.list.push(new i("",581,3,"Wedding Ring",!0,0,"/wedding-rings/womens-anniversary/",!1));this.list.push(new i("",340,3,"Wedding Ring",!0,0,"/wedding-rings/womens-eternity/",!1));this.list.push(new i("",525,3,"Wedding Ring",!0,0,"/wedding-rings/womens-eternity/",!1));this.list.push(new i("",584,3,"Wedding Ring",!0,0,"/wedding-rings/womens-eternity/",!1));this.list.push(new i("",341,3,"Wedding Ring",!0,0,"/wedding-rings/mens-carved/",!1));this.list.push(new i("",342,3,"Wedding Ring",!0,0,"/wedding-rings/mens-diamond/",!1));this.list.push(new i("",343,3,"Wedding Ring",!0,0,"/wedding-rings/mens-alternative-metals/",!1));this.list.push(new i("",509,3,"Wedding Ring",!0,0,"/wedding-rings/womens-carved/",!1));this.list.push(new i("",512,3,"Wedding Ring",!0,0,"/wedding-rings/",!1));this.list.push(new i("S",498,null,"Studs",!0,2,"/fine-jewelry/design-your-own-studs/",!1));this.list.push(new i("",526,null,"Two Stone Rings",!0,2,"fine-jewelry/two-stone-rings/",!1));this.list.push(new i("",499,null,"Gift Earings",!0,0,"/earrings/gifts/",!1));this.list.push(new i("P",502,null,"Pendants",!0,1,"/fine-jewelry/design-your-own-pendants/",!1));this.list.push(new i("",500,null,"Pendants",!0,0,"/pendants/preset-solitaire-pendants/",!1));this.list.push(new i("",516,null,"Mille Coeurs Pendants",!1,0,"/pendants/designer-gemstone-pendants/",!1));this.list.push(new i("",503,null,"Key Pendants",!0,0,"pendants/key-pendants/",!1));this.list.push(new i("",501,null,"Gift Pendants",!0,0,"fine-jewelry/solitaire-pendants/",!1));this.list.push(new i("",505,null,"Bracelet",!0,0,"bracelets/diamond-bracelets/",!1));this.list.push(new i("",530,null,"Bracelet",!0,0,"gemstone-bracelets/",!1));this.list.push(new i("",528,2,"Setting",!0,1,"how-he-asked/",!1));this.list.push(new i("",575,null,"Studs",!0,2,"/earrings/diamond-stud-earrings/",!1));this.list.push(new i("",497,null,"Diamond Jewelry",!0,0,"/earrings/diamond-stud-earrings/",!1));this.list.push(new i("T",515,null,"Mille Coeurs Earrings",!1,0,"/earrings/designer-gemstone-earrings/",!0));this.list.push(new i("T",582,null,"Precious Metal Jewelry",!1,0,"/precious-metal/",!0))},InitCustomerServiceClick:function(){t("#sendMessageFields .smallButton").click(function(){l(!0)})},AddTabletConsoleLine:function(n){n.console=n.console?n.console:t(".TabletConsole");t(n.console).append(n.newLine+"<br/><br/>")},ClearTabletConsole:function(n){n.console=n.console?n.console:t(".TabletConsole");t(n.console).empty()},GalleryVideoMoved:{},initSticky:function(n){t("header").toggleClass("sticky",n);t("#Funnel").toggleClass("stickyFunnel",n);t("#WidePane").toggleClass("stickyWidePane",n);t("#WidePane").toggleClass("WithFunnel",Boolean(n&&t("#Funnel").length>0));t(".sticky").one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){var n=t(".sticky").outerHeight(!0);t("#Funnel").css("top",n)})},haveDiamond:!0,wishList:[],AllVideos:[],addArrayToWishList:function(t){for(var i in t)t[i]&&n.Main.addToWishList(t[i].type,t[i].id)},wishListCount:0,isItemInWishList:function(i,r){var e={type:i,id:r},f=null,u;return r&&r.indexOf(",")!=-1&&(u=r.split(","),f=u[1]+","+u[0]),itemsFound=t.grep(n.Main.wishList,function(n){return n.id==r||n.id==f}),itemsFound.length>0},addToWishList:function(i,r){var f={type:i,id:r},u=!1;return itemsFound=t.grep(n.Main.wishList,function(n){return n.id==r}),itemsFound.length==0&&(n.Main.wishList.push(f),n.Main.wishList?t.cookie("WishList",JSON.stringify(n.Main.wishList),{expires:365}):t.cookie("WishList",null),u=!0),u},setClickAndDrag:function(){t(".RingsImagesResults").exists()?t.cookie("ClickAndDragGallery",!0):t.cookie("ClickAndDrag",!0);t("#photosFrame").exists()||t(".Drag").hide()},SizingKitPaneTransform:function(n,i){t("#SizingKitPane").transform({success:function(){n?t("#sizingkitPopup").showPopup():t("#DetermineRingSizePopup").showPopup();i&&i()},error:onError,xsl:"Content/Modules/Education/OrderRingSizer.xslt",xml:"Content/Modules/RingSizeFinder/Handler.ashx",xslParams:{Rand:Math.floor(Math.random()*1e4+1)}})},ShowRingSizeFinder:function(i){t.trim(t("#DetermineRingSizePane").html())==""&&JSite.Hijax.Manager.PageKey!="RingSizeFinder"?t.post("/Content/Modules/RingSizeFinder/RingSizeFinder.aspx",function(r){var f=t("[id=sizingkitPopup]").length,u;f>=1&&(u=t(r).remove("#sizingkitPopup"),r=u.html());t(".result").html(r);t("#DetermineRingSizePane").html(r);n.Main.SizingKitPaneTransform(i,function(){i?t("#sizingkitPopup").showPopup(function(){dataLayer.push({event:"item-page-ringsizer"});t("#captchaImage").attr("src","");t("#captchaImage").attr("src",n.Captch.CaptchaSrc());n.RingSizerFinder.InitRequestFreeRingSize()}):t("#DetermineRingSizePopup").showPopup()})}).error(function(n,t,i){devAlert("txt: "+t+", "+i)}):i?(t("#sizingkitPopup").showPopup(),t("#captchaImage").attr("src","Content/Utils/CaptchaHandler.ashx?k=ors")):JSite.Hijax.Manager.PageKey!="RingSizeFinder"?t("#DetermineRingSizePopup").showPopup():t("html, body").animate({scrollTop:0},"slow")},xmlElement:function(n,t,i){var r,u=n;return t?(n.indexOf(" ")!=-1&&(u=n.substring(0,n.indexOf(" "))),i&&(t=t.replace(/\&/g,"&amp;")),r="<"+n+">"+t+"<\/"+u+">"):r="<"+n+"/>",r},clearDragAndDropCookie:function(){t(".TopMenu li.dropDownMenu a,.LogoLink,.RingsImagesResults li .smallButton").click(function(){t.cookie("ClickAndDragGallery",null);t.cookie("ClickAndDrag",null);t.cookie("isCaratChanged",null);t.cookie("isPriceChanged",null);t.cookie("sliderChanged",null)})},shoppingCart:[],cartIndex:0,matchToUpdate:t.cookie("matchToUpdate")?t.parseJSON(t.cookie("matchToUpdate")):{id:null,type:null},getMatchType:function(t){return n.Main.shoppingCart[t]&&n.Main.shoppingCart[t].Diamonds&&!n.Main.shoppingCart[t].Jewel&&n.Main.shoppingCart[t].Diamonds.indexOf(",")>=0||n.Main.shoppingCart[t]&&!n.Main.shoppingCart[t].Jewel&&n.Main.shoppingCart[t].GemStones&&n.Main.shoppingCart[t].GemStones.indexOf("C")>-1?"Studs":n.Main.shoppingCart[t]&&(n.Main.shoppingCart[t].Diamonds||n.Main.shoppingCart[t].GemStones)&&!n.Main.shoppingCart[t].Jewel&&(!n.Main.shoppingCart[t].Diamonds||n.Main.shoppingCart[t].Diamonds.indexOf(",")<0)?"Ring":n.Main.shoppingCart[t]&&n.Main.shoppingCart[t].Jewel&&!n.Main.shoppingCart[t].Diamonds&&n.Main.shoppingCart[t].Jewel.indexOf("S")<0&&n.Main.shoppingCart[t].Jewel.indexOf("N")<0?"Single":n.Main.shoppingCart[t]&&n.Main.shoppingCart[t].Jewel&&!n.Main.shoppingCart[t].Diamonds&&n.Main.shoppingCart[t].Jewel.indexOf("S")>=0?"Pair":void 0},isDiamondOrGemstoneAloneExists:function(t){for(var i=n.Main.shoppingCart.length-1;i>=0;i--)if(t!=i&&!n.Main.shoppingCart[i].Jewel&&(n.Main.shoppingCart[i]&&n.Main.shoppingCart[i].Diamonds&&n.Main.shoppingCart[i].Diamonds.split(",").length<2||n.Main.shoppingCart[i]&&n.Main.shoppingCart[i].GemStones&&n.Main.shoppingCart[i].GemStones.indexOf("C")<0))return!0;return!1},existRingMatch:function(){for(var t=n.Main.shoppingCart.length-1;t>=0;t--)if(n.Main.shoppingCart[t]&&(n.Main.shoppingCart[t].Diamonds&&n.Main.shoppingCart[t].Diamonds.indexOf(",")<0||n.Main.shoppingCart[t].GemStones&&n.Main.shoppingCart[t].GemStones.indexOf(",")<0)&&!n.Main.shoppingCart[t].Jewel)return t;return null},existStudsMatch:function(){for(var t=n.Main.shoppingCart.length-1;t>=0;t--)if(n.Main.shoppingCart[t]&&n.Main.shoppingCart[t].Diamonds&&n.Main.shoppingCart[t].Diamonds.indexOf(",")>=0&&!n.Main.shoppingCart[t].Jewel)return t;return null},existDiamondOrGemstoneMatch:function(){for(var i,t=n.Main.shoppingCart.length-1;t>=0;t--)if(n.Main.shoppingCart[t]&&n.Main.shoppingCart[t].Jewel&&(i=n.Main.ItemsList.getItemDetailsByItemID(n.Main.shoppingCart[t].Jewel),i&&i.matchToSingleDiamondGemstone()&&!n.Main.shoppingCart[t].Diamonds&&!n.Main.shoppingCart[t].GemStones))return t;return null},existDiamondPairsMatch:function(){for(var t=n.Main.shoppingCart.length-1;t>=0;t--)if(n.Main.shoppingCart[t]&&n.Main.shoppingCart[t].Jewel&&n.Main.shoppingCart[t].Jewel.indexOf("S")>=0&&!n.Main.shoppingCart[t].Diamonds&&!n.Main.shoppingCart[t].GemStones)return t;return null},existGemstonesPairsMatch:function(){for(var t=n.Main.shoppingCart.length-1;t>=0;t--)if(n.Main.shoppingCart[t]&&n.Main.shoppingCart[t].Jewel&&n.Main.shoppingCart[t].Jewel.indexOf("S")>=0&&!n.Main.shoppingCart[t].Diamonds&&!n.Main.shoppingCart[t].GemStones)return t;return null},calcItemsAmount:function(){var n=mobileShoppingCart.getItemsAmount();return t("#cart a span.Numeric").html("("+n+")"),t.cookie("itemsAmount",n),n},initWishListCount:function(){var i,u,r;try{i=t.parseJSON(t.cookie("MobileWishlist"))||[]}catch(f){console.log("MobileWishlist cookie error1");i=[]}for(u=0,r=0;i&&r<i.length;r++)i&&i[r]&&(i[r].type=="jewel"||!i[r].jewelMatch)&&u++;try{n.Main.wishListCount=u}catch(f){n.Main.wishListCount=0}window.RenderHeader&&window.RenderHeader();t(".MainHeader .WishlistCount").html("("+n.Main.wishListCount+")")},initCartIndex:function(){if(n.Main.shoppingCart.length==0){n.Main.cartIndex=0;return}n.Main.cartIndex=n.Main.shoppingCart[n.Main.shoppingCart.length-1]&&n.Main.shoppingCart[n.Main.shoppingCart.length-1].Jewel?n.Main.shoppingCart.length:n.Main.shoppingCart.length+1},cartDetails:null,cartDetailsNew:null,getItemDetails:function(t,i){var r,u;if(t=parseInt(t),r=n.Main.cartDetails,r&&r.Cart)if(i=="Diamond"||i=="diamond")if(r.Cart.diamonds&&r.Cart.diamonds.Diamond.length){for(u=0;u<r.Cart.diamonds.Diamond.length;u++)if(r.Cart.diamonds.Diamond[u]&&r.Cart.diamonds.Diamond[u]["@DiamondID"]==t)return r.Cart.diamonds.Diamond[u]}else if(r.Cart.diamonds&&r.Cart.diamonds.Diamond&&r.Cart.diamonds.Diamond.Diamond&&r.Cart.diamonds.Diamond.Diamond.length){for(u=0;u<r.Cart.diamonds.Diamond.Diamond.length;u++)if(r.Cart.diamonds.Diamond.Diamond[u]&&r.Cart.diamonds.Diamond.Diamond[u]["@DiamondID"]==t)return r.Cart.diamonds.Diamond.Diamond[u]}else{if(r.Cart.diamonds&&r.Cart.diamonds.Diamond["@DiamondID"]==t)return r.Cart.diamonds.Diamond;if(r.Cart.diamonds&&r.Cart.diamonds.Diamond.Diamond&&r.Cart.diamonds.Diamond.Diamond["@DiamondID"]==t)return r.Cart.diamonds.Diamond.Diamond}else if(i=="Gemstone"||i=="gemstone")if(r.Cart.Gemstones&&r.Cart.Gemstones.length){for(u=0;u<r.Cart.Gemstones.length;u++)if(r.Cart.Gemstones[u]&&r.Cart.Gemstones[u]["@GemstoneID"]==t)return r.Cart.Gemstones[u]}else{if(r.Cart.Gemstones&&r.Cart.Gemstones["@GemstoneID"]==t)return r.Cart.Gemstones;if(r.Cart.Gemstones&&r.Cart.Gemstones.Gemstone&&r.Cart.Gemstones.Gemstone.length){for(u=0;u<r.Cart.Gemstones.Gemstone.length;u++)if(r.Cart.Gemstones.Gemstone[u]&&r.Cart.Gemstones.Gemstone[u]["@GemstoneID"]==t)return r.Cart.Gemstones.Gemstone[u]}else if(r.Cart.Gemstones&&r.Cart.Gemstones.Gemstone&&r.Cart.Gemstones.Gemstone.Gemstone&&r.Cart.Gemstones.Gemstone.Gemstone.length){for(u=0;u<r.Cart.Gemstones.Gemstone.length;u++)if(r.Cart.Gemstones.Gemstone.Gemstone[u]&&r.Cart.Gemstones.Gemstone.Gemstone[u]["@GemstoneID"]==t)return r.Cart.Gemstones.Gemstone.Gemstone[u]}else{if(r.Cart.Gemstones&&r.Cart.Gemstones.Gemstone&&r.Cart.Gemstones.Gemstone["@GemstoneID"]==t)return r.Cart.Gemstones.Gemstone;if(r.Cart.Gemstones&&r.Cart.Gemstones.Gemstone&&r.Cart.Gemstones.Gemstone.Gemstone&&r.Cart.Gemstones.Gemstone.Gemstone["@DiamondID"]==t)return r.Cart.Gemstones.Gemstone.Gemstone}}else if(r.Cart.Jewels&&r.Cart.Jewels.Jewel.length)for(u=0;u<r.Cart.Jewels.Jewel.length;u++){if(parseInt(r.Cart.Jewels.Jewel[u]["@JewelID"])==t)return r.Cart.Jewels.Jewel[u];if(r.Cart.Jewels.Jewel[u].Jewel&&r.Cart.Jewels.Jewel[u].Jewel["@JewelID"]==t)return r.Cart.Jewels.Jewel[u].Jewel}else if(r.Cart.Jewels&&r.Cart.Jewels.Jewel.Jewel&&r.Cart.Jewels.Jewel.Jewel.length){for(u=0;u<r.Cart.Jewels.Jewel.Jewel.length;u++)if(parseInt(r.Cart.Jewels.Jewel.Jewel[u]["@JewelID"])==t)return r.Cart.Jewels.Jewel.Jewel[u]}else{if(r.Cart.Jewels&&parseInt(r.Cart.Jewels.Jewel["@JewelID"])==t)return r.Cart.Jewels.Jewel;if(r.Cart.Jewels&&r.Cart.Jewels.Jewel.Jewel&&parseInt(r.Cart.Jewels.Jewel.Jewel["@JewelID"])==t)return r.Cart.Jewels.Jewel.Jewel}},execWishListService:function(){JSite.Hijax.Manager.UserID&&n.WishListService("UpdateDBWishList",{responseNewCookie:null},function(){})},execShoppingCartService:function(t){JSite.Hijax.Manager.UserID?n.ShoppingCartService("UpdateDBShoppingCart",{responseNewCookie:null},function(){t&&JSite.Hijax.Manager.Load(t)}):t&&JSite.Hijax.Manager.Load(t)},updateCookieWishlist:function(){t.cookie("MobileWishlist")&&JSite.Hijax.Manager.UserID&&n.WishListService("updateCookieWishlist",{},function(){})},execCartService:function(i,r,u){var f;r=r!=undefined?r:!0;n.Main.calcItemsAmount();(i||t.cookie("ShoppingCart")&&t.cookie("ShoppingCart").length>0)&&t("checkout-data cartjson").length&&(f=t("checkout-data cartjson").html(),yt(f,u))},initWishListPopup:function(){t("#wishListContinue #yes").click(function(){n.Main.initCartIndex();n.Functions.ClosePopup(t("#wishListContinue .button-x"));JSite.Hijax.Manager.Load("/wishlist/")});t("#wishListContinue #no").click(function(){n.Functions.ClosePopup(t("#wishListContinue .button-x"))})},cartIDs:[],createCartWindow:function(){var p,w=JSite.Hijax.Currency.Rate,b=JSite.Hijax.Currency.Symbol,r,h,nt,e,tt,g,v,l,it,y,o,a,c,rt;if(t.cookie("ShoppingCart")){var f=t.parseJSON(t.cookie("ShoppingCart")),u,i,k=0,s,g="Setting",d="https:"==document.location.protocol?"https://":"http://";for(r in f)if(f[r]){if(h=[],f[r].Diamonds&&(h=f[r].Diamonds.toString().split(",")),nt=[],f[r].GemStones&&(nt=f[r].GemStones),e=f[r].Jewel,e&&e!=""){if(tt=f[r].ringDiamondShape=="Princess",o=n.Main.ItemsList.getItemDetailsByItemID(e),!o)continue;g=o.cartTitle;e=parseInt(e);i="";f[r].Diamonds||f[r].GemStones?(i+='<li class="bind">',i+="<span><\/span>",i+="<\/li>"):(o.diamondMatchType==2?(i+='<li match="'+r+'" class="empty">',i+='<img src="Images/empty.png"><\/img >',i+='<a container="#WidePane" disablescrolltop="True" href="/matching-pairs/all-diamonds/?CaratFrom=0.15&CaratTo=10&PriceFrom=400&PriceTo=9999000&TabSelected=1&showAdvanced=hide">Add a Pair of Diamonds<\/a>',i+='<a container="#WidePane" disablescrolltop="True" href="/gemstones/matching-pairs/all-gemstones/">Add a Pair of Gemstones<\/a>',i+="<\/li>"):f[r].singleItem||o.diamondMatchType!=1||(i+='<li match="'+r+'" class="empty">',i+='<img src="Images/empty.png"><\/img >',i+="<a container='#WidePane' disablescrolltop='True'  onclick='$.cookie(\"FunnelRingMatchID\","+e+');JSite.Hijax.Manager.Load("loose-diamonds/all-diamonds/");\'  >Add a Diamond<\/a>',i+="<a container='#WidePane' disablescrolltop='True'  onclick='$.cookie(\"FunnelRingMatchID\","+e+");JSite.Hijax.Manager.Load(\"gemstones/all-gemstones/\");'  style='display: inline-block; width: 129px;'>Add a Gemstone<\/a>",i+="<\/li>"),f[r].singleItem||o.diamondMatchType==0||(i+='<li class="bind">',i+="<span><\/span>",i+="<\/li>"));u=n.Main.getItemDetails(e,"Jewel");u?(c=Math.round(u["@Price"]*w),s="/"+u["@Url"],v=d+"ion.r2net.com/"+u["@Pic"],tt&&(v=v.replace(/_RND_/g,"_PRN_")),p={type:"jewel",id:e},i+='<li match="'+r+'" itemID="'+e+'">',i+="<table><tr><td>",i+='<img itemUrl="'+s+'"/>',i+="<\/td><td>",i+='<span class="Title GoogleEEType">'+g+" <\/span>",i+='<span class="Title GoogleEEName">'+u["@JATitle"]+" <\/span>",i+='<span class="Title Numeric GoogleEESKU">SKU: '+u["@SKU"]+" <\/span>",i+='<span class="Numeric Price GoogleEEPrice">'+b+n.Functions.AddCommas(c,!0)+"<\/span>",i+='<a class="Edit">Edit<\/a><a class="Remove">Remove<\/a>',i+="<\/td><\/tr><\/table>",i+="<\/li>",k+=parseInt(c)):(n.Main.cartDetails.Cart&&n.Main.cartDetails.Cart.Jewels&&n.Main.cartDetails.Cart.Jewels.Jewel[0]&&n.Main.cartDetails.Cart.Jewels.Jewel[0].Jewel&&n.Main.cartDetails.Cart.Jewels.Jewel[0].Jewel[0]&&window.location.reload(),p={type:"jewel",id:e},i+='<li match="'+r+'" itemID="'+e+'">',i+='<img alt="Error"  itemUrl="'+s+'"/>',i+='<span class="Title">Ring '+e+"<\/span>",i+='<span class="Desc">Error<\/span>',i+='<span class="Numeric Price">Error<\/span>',i+='<a class="Edit">Edit<\/a><a class="Remove">Remove<\/a>',i+="<\/li>")}if(f[r].GemStones){if(l=parseInt(f[r].GemStones),o=n.Main.ItemsList.getItemDetailsByItemID(f[r].GemStones),!o)continue;it=o.isPair();f[r].singleItem||e||(i="",i+='<li class="bind">',i+="<span><\/span>",i+="<\/li>",it?(i+='<li match="'+r+'" class="empty">',i+='<img src="Images/empty.png"><\/img >',i+='<a container="#WidePane" disablescrolltop="True" href="/fine-jewelry/design-your-own-studs/">Add a Studs Setting<\/a>',i+="<\/li>"):(i+='<li match="'+r+'" class="empty">',i+='<img src="Images/empty.png"><\/img >',i+='<a  href="engagement-rings/all-settings/" container="#WidePane" disablescrolltop="True">Add a Ring Setting<\/a>',i+='<a  href="fine-jewelry/design-your-own-pendants/" container="#WidePane" disablescrolltop="True">Add a Pendant Setting<\/a>',i+="<\/li>"));i="";u=n.Main.getItemDetails(parseInt(l),"Gemstone");u&&(c=Math.round(u["@Price"]*w),s="/"+u["@Url"].replace(" ",""),u?(v=d+"ion.r2net.com/"+u["@Pic"],p={type:"gemstone",id:l},i+='<li match="'+r+'" itemID="'+l+'">',i+="<table><tr><td>",i+='<img src="'+v+'" itemUrl="'+s+'"/>',i+="<\/td><td>",i+='<span class="Title GoogleEEType">'+o.cartTitle+" <\/span>",i+='<span class="Desc GoogleEEName">'+u["@Details"]+"<\/span>",i+='<span class="Title Numeric GoogleEESKU">SKU: '+l+" <\/span>",i+='<span class="Numeric Price GoogleEEPrice">'+b+n.Functions.AddCommas(c,!0)+"<\/span>",i+='<a class="Edit">Edit<\/a><a class="Remove">Remove<\/a>',i+="<\/td><\/tr><\/table>",i+="<\/li>",k+=parseInt(c)):(p={type:"gemstone",id:l},i+='<li match="'+r+'" itemID="'+l+'">',i+='<img alt="Error" itemUrl="'+s+'"/>',i+='<span class="Title">Error<\/span>',i+='<span class="Desc"> Gemstone '+l+" was not found<\/span>",i+='<span class="Numeric Price">Error<\/span>',i+='<a class="Edit">Edit<\/a><a class="Remove">Remove<\/a>',i+="<\/li>"))}if(f[r].Diamonds)for(f[r].singleItem||e||(i="",i+='<li class="bind">',i+="<span><\/span>",i+="<\/li>",h.length==2?(i+='<li match="'+r+'" class="empty">',i+='<img src="Images/empty.png"><\/img >',i+='<a container="#WidePane" disablescrolltop="True" href="/fine-jewelry/design-your-own-studs/">Add a Studs Setting<\/a>',i+="<\/li>"):(i+='<li match="'+r+'" class="empty">',i+='<img src="Images/empty.png"><\/img >',i+="<a style='cursor:pointer' onclick='$.cookie(\"FunnelDiamondRingMatchID\","+h[r]+");JSite.Hijax.Manager.Load(\"engagement-rings/all-settings/\");' container='#WidePane' disablescrolltop='True'>Add a Ring Setting<\/a>",i+="<a style='cursor:pointer' onclick='$.cookie(\"FunnelDiamondRingMatchID\","+h[r]+");JSite.Hijax.Manager.Load(\"fine-jewelry/design-your-own-pendants/\");'  container='#WidePane' disablescrolltop='True'>Add a Pendant Setting<\/a>",i+="<\/li>")),y=0;y<h.length;y++)(o=n.Main.ItemsList.getItemDetailsByItemID(h[y]),o)&&(a=parseInt(h[y]),i="",u=n.Main.getItemDetails(a,"Diamond"),u?(c=Math.round(u["@Price"]*w),s="/"+u["@Url"],o.isPair()&&(s=parseInt(y)<h.length-1?s.replace("sku","pair")+","+parseInt(h[1]):s.replace("sku","pair")+","+parseInt(h[0])),y=="0"&&o.isPair()&&(i+='<li class="bind">',i+="<span><\/span>",i+="<\/li>"),u&&(v=d+"ion.r2net.com/"+u["@Pic"],p={type:"diamond",id:a},i+='<li match="'+r+'" itemID="'+a+'">',i+="<table><tr><td>",i+='<img src="'+v+'" itemUrl="'+s+'"/>',i+="<\/td><td>",i+='<span class="Title GoogleEEType">'+o.cartTitle+" <\/span>",i+='<span class="Desc GoogleEEName">'+u["@Details"]+"<\/span>",i+='<span class="Title Numeric GoogleEESKU">SKU: '+a+" <\/span>",i+='<span class="Numeric Price GoogleEEPrice">'+b+n.Functions.AddCommas(c,!0)+"<\/span>",i+='<a class="Edit">Edit<\/a><a class="Remove">Remove<\/a>',i+="<\/td><\/tr><\/table>",i+="<\/li>",k+=parseInt(c)),p={type:"diamond",id:a}):(s="loose-diamonds/",i+='<li match="'+r+'" itemID="'+a+'">',i+='<img alt="NA" itemUrl="'+s+'"/>',i+='<span class="Title">Diamond<\/span>',i+='<span class="Desc"> Diamond '+a+" was not found<\/span>",i+='<span class="Numeric Price">Sold<\/span>',i+='<a class="Edit">Edit<\/a><a class="Remove">Remove<\/a>',i+="<\/li>"))}}rt=t.cookie("itemsAmount")?t.cookie("itemsAmount"):0},clickCartImage:function(){t("#cart li img").not("li.empty img").click(function(){n.Main.showHideCart(!1);var i=this;t("#topCartTipex").queue(function(){JSite.Hijax.Manager.Container="#WidePane";JSite.Hijax.Manager.ScrollTop=!1;JSite.Hijax.Manager.Load(t(i).attr("itemurl"));t(this).dequeue()})})},initButtons:function(){jQuery.validator.addMethod("confirmPassword",function(n,i){return n==t(i).closest("form").find("#password").val()},"Please enter the same value again.");jQuery.validator.addMethod("financing",function(n){return n.indexOf("6006")==0&&n.length==16},"This is not a valid James Allen Financing Account Number");jQuery.validator.addMethod("measRequired",function(n,i){var u=t(i).closest(".Measurements").find("input"),r=!0;return t(u).each(function(){if(t(this).val().length==0)return r=!1,!1}),r},"Measurements are required");t(".bigButton, .smallButton").click(function(n){if(t(this).hasClass("Cancel")&&t(this).closest("form").exists()){t(this).closest("form").validate().resetForm();return}if(t(this).attr("ignoreValidate")!="true"&&t(this).closest("form").exists()&&!t(this).closest("form").valid()){if(t(".popup:visible").size()==0&&t(this).closest("form").find(".error:visible").centerScroll(),t(this).closest("form").attr("showPopup")=="true")var i=t("#FormValidateMessage").showPopup();n.stopImmediatePropagation()}})},InitTextInput:function(){t('input[type ="text"], input[type ="password"], textarea').focus(function(){t(this).addClass("clicked");this.select()}).mouseup(function(n){n.preventDefault()});t("select").focus(function(){t(this).addClass("clicked")});t('input[type ="text"], input[type ="password"], textarea, select').blur(function(){t(this).removeClass("clicked")})},CartMenuClick:function(){dataLayer.push({event:"shoppingcartdropdown"});n.Main.showHideCart(!1);n.Checkout.CheckAvailableCartDiamonds("shopping-cart/")},CheckoutClick:function(t){dataLayer.push({event:"checkoutdropdown"});var i=t.ctrlKey&&t.altKey?"fast-checkout/":"shop_bag_billing/";FeatureSupport.IsStore=="True"&&(i="fast-checkout/");n.Checkout.CheckAvailableCartDiamonds(i,function(){n.Main.showHideCart()})},InitCartWindow:function(){t("#ShopMenu .subtotal .actionBtn:last-child").unbind("click");t("#ShopMenu .subtotal .actionBtn:last-child").click(n.Main.CheckoutClick);t("#ShopMenu .subtotal .actionBtn:first-child").click(n.Main.CartMenuClick)},showHideCart:function(i){var r,u;r=i!=undefined?i:t("#cart ul").css("display")=="none"||r?!0:!1;r&&!t("#cart a#cartLink").hasClass("cartOnClick")?(t("#ShopMenu > div").length||t("#ShopMenu").addClass("Empty"),t("#ShopMenu").addClass("Wait"),t.cookie("CouponVal")!=null&&mobileShoppingCart.updateCartCoupon(t.cookie("CouponVal")),document.querySelector(".HeaderButtons")&&JSite.Hijax.Manager.LoadAjax("cart-dropdown/","#ShopMenu",function(){ft();t("#ShopMenu").removeClass("Wait");t("#ShopMenu").removeClass("Empty");n.Main.InitCartWindow()}),t("#cartArrow").removeClass("arrowDown"),t("#cartArrow").addClass("arrowUp"),t("#cart ul").css("height","auto"),u=t("#cart ul").height(),t("#cart a").centerScroll(),t("#cart").css("height","0px"),t("#cart a#cartLink").addClass("cartOnClick"),t("#cart").animate({height:"28px"},200,function(){t("#topCartTipex").css("height","0px");t("#cart ul").toggle();t("#cart ul").css("height","0px");t("#cart ul").animate({height:u+"px"},200,function(){t("#cart ul").css("height","auto")})}),t("#topCartTipex").toggle(),t("#topCartTipex").animate({height:"20px"},200)):!r&&t("#cart a#cartLink").hasClass("cartOnClick")&&t("#cart ul").animate({height:"0px"},"fast",function(){t("#cart a#cartLink").removeClass("cartOnClick");t("#cartArrow").addClass("arrowDown");t("#cartArrow").removeClass("arrowUp");t("#cart ul").hide();t("#topCartTipex").hide()})},removeItemWithoutConfirm:function(i,r){var s=!1,u=t.parseJSON(t.cookie("ShoppingCart")),f,e,o,c,h,l;for(f in u)if(s=!1,u[f]&&!r||r==f){e=[];o=null;u[f].GemStones&&u[f].GemStones&&(o=u[f].GemStones);try{e=u[f].Diamonds.toString().split(",")}catch(a){u[f]&&u[f].Diamonds&&e.push(u[f].Diamonds)}for(c=!1,h=0;h<e.length;h++)i==parseInt(e[h])&&(c=!0);c&&(e=[]);parseInt(u[f].Jewel)==parseInt(i)&&(s=!0,u[f].Jewel="");parseInt(i)==parseInt(o)&&(o=null);u[f]={Diamonds:e.join(","),Jewel:u[f].Jewel,GemStones:o};u=t.grep(u,function(n){return n&&(n.Jewel!=null&&n.Jewel!=""&&n.Jewel!=undefined||n.Diamonds!=null&&n.Diamonds!=""&&n.Diamonds!=undefined||n.GemStones!=null&&n.GemStones!=""&&n.GemStones!=undefined)});l="Remove from Wish List?";!1&&s&&t.cookie("itemsAmount",t.cookie("itemsAmount")-1);mobileShoppingCart.removeFromCart({id:i});s&&t.cookie("itemsAmount",t.cookie("itemsAmount")-1)}return n.Main.shoppingCart=t.cookie("ShoppingCart")?t.parseJSON(t.cookie("ShoppingCart")):[],n.Main.calcItemsAmount(),n.Main.cartIndex},galleryIpadFunctions:function(){t(".ui-slider .ui-slider-handle").append('<div class="handlerBackground"><\/div>');var r=null,i=null;n.Main.autoPager&&(r=n.Main.autoPager.pageNumber,i=n.Main.autoPager.numberOfPages);n.Main.IsTablet()&&(t("#ViewsOptions").hide(),t(".SearchPanel a").attr("onmouseover",null),t(".SearchPanel a").attr("onmouseout",null),n.Main.autoPager&&n.Main.autoPager.getNextResults(),t(".canvasWrapper img").click(function(){t(".Loader").hide();t(this).closest("li").find(".Loader").show()}),!i||i<2?t(".moreResults").hide():t(".moreResults").show(),t(".moreResults").next().hide(),t(".ResultsFooter, .Explanation, #JaLinks").hide(),t("#Footer").hide(),t(".Copyrights").hide(),t(".canvasWrapper").css("cursor","pointer"),t(".canvasWrapper").click(function(){var n=t(this).closest("li").find(".smallButton").attr("href");JSite.Hijax.Manager.Container="#WidePane";JSite.Hijax.Manager.ScrollTop=!0;JSite.Hijax.Manager.Load(n)}))},checkRingsDiamondRequired:function(){var i=t.parseJSON(t.cookie("ShoppingCart"));return diamondMissingJewels=t.grep(i,function(t){return itemDetails=t?n.Main.getItemDetails(t.Jewel,"Jewel"):null,t&&t.Jewel&&t.Jewel!=""&&itemDetails&&(!t.Diamonds||t.Diamonds=="")&&(!t.GemStones||t.GemStones=="")&&itemDetails["@CenterRequired"]==1}),diamondMissingJewels.length==0?!0:void 0},initLoginDiv:function(){},showMainLoader:function(){t("body").addClass("LoaderOn");t(".PageLoader").show();t("#greyOut").css("height",t(document).outerHeight());t("#greyOut").addClass("Disabled");t("#greyOut").show();t("#absoluteDiv").addClass("Visible")},hideMainLoader:function(){(t("body").removeClass("LoaderOn"),t(".PageLoader").hide(),t(".popup").is(":visible"))||(t("#greyOut").removeClass("Disabled"),t("#greyOut").hide(),t("#absoluteDiv").removeClass("Visible"),document.body.classList.remove("hide-loader"))},showItemPopup:function(i){n.Main.showMainLoader();t("body").addClass("PopupOpen");var r="tempgetinspireditem/?SoldRingId="+i;JSite.Hijax.Manager.ScrollTop=!1;JSite.Hijax.Manager.LoadAjax(r,"#GalleryPopup #PopupContent",function(){t("#GalleryPopup").showPopup(null,n.Main.hideMainLoader())},function(){n.Main.showGalleryPopup();console.log("Error - Get inspired ring id does not exists")})},showGalleryPopup:function(){dataLayer.push({event:"OpenInspirationGalleryPopUp"});var n="/diamond-rings/diamond-engagement-rings/";t.cookie("GetInsipredFiltersCompleteRings",n);JSite.Hijax.Manager.Load(n,"#WidePane")},ShowDynamicModal:function(t,i){n.InitComponent&&n.InitComponent.InitDynamicModal(document.querySelector("#absoluteDiv"),i)},ShowTaxCalculatorPopup:function(){JSite.Hijax.Manager.LoadAjax("tax-calculator/","#TaxCalculatorPop .PopupContent1",function(){t("#TaxCalculatorPop").showPopup()})},callPlayer:function(n,t,i){window.jQuery&&n instanceof jQuery&&(n=n.get(0).id);var r=document.getElementById(n);r&&r.tagName.toUpperCase()!="IFRAME"&&(r=r.getElementsByTagName("iframe")[0]);r&&r.contentWindow.postMessage(JSON.stringify({event:"command",func:t,args:i||[],id:n}),"*")},removeItem:function(i,r,u,f){var l=!1,o=t.parseJSON(t.cookie("ShoppingCart")),e,s,h,a,c,v;for(e in o)if(r==e){s=[];h=null;o[e].GemStones&&(h=o[e].GemStones);try{s=o[e].Diamonds.toString().split(",")}catch(y){s.push(o[e].Diamonds)}for(s.length>1&&t.grep(s,function(n){return i.toString().replace(/\D/g,"")==n.toString().replace(/\D/g,"")}).length>0&&(l=!0),a=!1,c=0;c<s.length;c++)i==parseInt(s[c])&&(a=!0);a&&(s=[]);parseInt(o[e].Jewel)==parseInt(i)&&(o[e].Jewel="");parseInt(i)==parseInt(h)&&(h=null);v=l?"Are you sure you want to remove both diamonds?":"Are you sure you want to remove this item?";(u||confirm(v))&&(JA.GoogleEE.PushRemoveFromCart(i),mobileShoppingCart.removeFromCart({id:l?o[e].Diamonds:i}),n.Main.createCartWindow(),n.Main.execShoppingCartService(f),JSite.Hijax.Manager.Container="#WidePane",JSite.Hijax.Manager.Reload(!1))}return n.Main.shoppingCart=t.cookie("ShoppingCart")?t.parseJSON(t.cookie("ShoppingCart")):[],JSite.Hijax.Manager.Container="#WidePane",n.Main.calcItemsAmount(),n.Main.cartIndex},RegisterItemPage:function(n,t,i,r){dataLayer.push({sku:t,category:n,itemTitle:i,price:r});dataLayer.push({event:"item-page-load"})},RegisterGalleryPage:function(n,t){t.category=n;dataLayer.push(t);dataLayer.push({event:"gallery-page-load"})},RegisterCompleteProductPage:function(n){dataLayer.push(n);dataLayer.push({event:"complete-product-page-load"})},RegisterAddToWishlistEvent:function(n){dataLayer.push(n);dataLayer.push({event:"add-to-wishlist"})},RegisterViewWishlistEvent:function(n){dataLayer.push(n);dataLayer.push({event:"add-to-wishlist"})},RegisterSignupForExcDlsEvent:function(n){var t="";t=n=="Male"?"mensignup":"womensignup";dataLayer.push({event:t})}},d,u={},g="https://elasticsearch.jamesallen.com",nt="";return window.location.href.indexOf("www.jamesallen.com")>0&&(nt="https://ion.r2net.com/"),k}();u="https:"==document.location.protocol?"https:":"http:"})(window.JamesAllen=window.JamesAllen||{},jQuery);
/*!! ver.1.1 ShoppingCart.js */
var mobileShoppingCart=function(){function ot(){console.log(n);var t=[],i=["Jewel","GemStones","Diamonds"];n.forEach(function(n){i.forEach(function(i){var r=n[i]&&n[i].length&&n[i].split(",").forEach(function(n){t.push(n)})})});console.log(t)}function st(t,r,u,f){var e=f["@Shape"],o=parseFloat(f["@Carat"]);if(u[e]&&parseFloat(u[e].maxCarat)>=o&&parseFloat(u[e].minCarat)<=o){var l=h({id:r.itemID.toString()}),s=h({id:t.itemID.toString()}),c={id:s.Diamonds,type:"diamond",categoryID:s.diamondCategory};delete n[t.cartIndex];p(c,r);i();JSite.Hijax.Manager.Reload()}}function ht(){var s=$("#CombineCartItems").data(),f=s.jewelMatch,o=s.diamondMatch,t=JamesAllen.Main.getItemDetails(o.itemID,"Jewel"),e=JamesAllen.Main.getItemDetails(f.itemID,"Diamond");e||(e=JamesAllen.Main.getItemDetails(f.itemID,"Gemstone"));var r=e["@Shape"],c=parseFloat(e["@Carat"]),l=t[r]?t[r].maxCarat:0,a=t[r]?t[r].minCarat:9999;if(t[r]&&parseFloat(l)>=c&&parseFloat(a)<=c){var y=h({id:o.itemID.toString()}),u=h({id:f.itemID.toString()}),v={id:u.Diamonds||u.GemStones,type:u.Diamonds?"diamond":"gemstone",categoryID:u.diamondCategory||u.jewelCategory};delete n[f.cartIndex];p(v,o);i();JSite.Hijax.Manager.Reload()}else dataLayer.push({event:"CombineCartItemsError"}),$("#CombineCartItemsError").ChangePopup()}function ct(){var r,i;a(!0);var n=l({type:"jewel"}),t=l({type:"diamond"});n&&t&&n.count==t.count==1&&(r=JamesAllen.Main.getItemDetails(t.itemID,"Jewel"),i=JamesAllen.Main.getItemDetails(n.itemID,"Diamond"),i||(i=JamesAllen.Main.getItemDetails(n.itemID,"Gemstone")),$("#CombineCartItems").data({jewelMatch:n,diamondMatch:t,jewelDetails:r,diamondDetails:i}),dataLayer.push({event:"CombineCartItems"}))}function h(t){return itemsFound=$.grep(n,function(n){if(n)return diamonds=n.Diamonds?n.Diamonds.split(","):[],gemstones=n.GemStones?n.GemStones.split(","):[],jewel=n.Jewel,jewel==t.id||$.inArray(t.id,diamonds)!=-1||$.inArray(t.id,gemstones)!=-1}),itemsFound.length?itemsFound[0]:void 0}function lt(){$("cart").each(function(){$(this).find("jewel, gemstone, diamond").each(function(){var n=$(this).attr("diamondid")||$(this).attr("gemstoneid")||$(this).attr("jewelid");u[n]={};$.each(this.attributes,function(t,i){var r="@"+i.name,f=i.value;u[n][r]=f});$(this).find("ringsize").each(function(){u[n].RingSize={};$.each(this.attributes,function(t,i){var r=i.name,f=i.value;u[n].RingSize[r]=f});u[n].RingSize.JewelDiamondRange=[];$(this).find("jeweldiamondrange").each(function(){var t={};$.each(this.attributes,function(n,i){var r=i.name,u=i.value;t[r]=u});u[n].RingSize.JewelDiamondRange.push(t)})})})})}function at(n){selectedItem=n.item;n.itemInCartFunc=n.itemInCartFunc||function(){alert("This item can only be added once")};n.afteNotAddedFunc=n.afteNotAddedFunc||function(){alert("Error adding item")};var i=ItemsCategories.getCategoryByID(selectedItem.categoryID),r=mobileShoppingCart.getMatchToUpdate(selectedItem),t={item:selectedItem,afteNotAddedFunc:n.afteNotAddedFun,specialDiamond:n.spacialDiamond,isPair:n.isPair,funnelType:n.funnelType},u=window.MobileFunnel?MobileFunnel&&MobileFunnel.FunnelMatchExists({newItemType:t.item.type,funnelType:t.funnelType}):b({newItemType:t.item.type,funnelType:t.funnelType});i.isSingleItem()?(t.afterSingleItemAddedFunc=n.afterSingleItemAddedFunc,t.afterItemAddedFunc=n.afterItemAddedFunc,t.singleItem=!0,mobileShoppingCart.NewAddItemToCart(t)):u?window.MobileFunnel?(JSite.console.log(n),MobileFunnel.AddToFunnel(n)):y(n):r?(t.afterItemAddedFunc=n.afterCompleteMatchAddedFunc,mobileShoppingCart.NewAddItemToCart(t)):n.newMatchFunc&&n.newMatchFunc()}function vt(n){return u[n]}function yt(t){if(n[n.length-1])return n[n.length-1].groupID=t,i(),!0}function pt(){return!1}function wt(t){for(var f,u=!1,r=0;r<n.length;r++)n[r]&&(n[r].coupon=t,u=!0);return u?(f=JSite.Hijax.Manager.PageKey==="Checkout",i(f),!0):!1}function bt(t,r,u){for(var e,o,f=0;f<n.length;f++)if(n[f]&&n[f].groupID==t){if(n[f].carePlanID&&JamesAllen.CarePlan&&JamesAllen.CarePlan.UpdateCarePlanGroupID({carePlanID:n[f].carePlanID},t),e=n[f].uniqueID,o=JSON.parse(JSON.stringify(n[f])),n[f].Jewel=null,n[f].jewelCategory=null,n[f].Diamonds=null,n[f].diamondCategory=null,n[f].GemStones=null,n[f].gemstoneCategory=null,n[f].carePlanID=null,n[f].uniqueID=null,s(),kt(e),i(!0,!0),u)return o;if(r==!0)return $("#ShopMenuContainer").addClass("fade"),$("#ShopMenu").addClass("Wait"),JSite.Hijax.Manager.Reload(),!0}return!1}function kt(n){var t=JSON.parse(localStorage.getItem("ShoppingCart")),r=t.find(function(t){return t.uniqueID==n}),i=t.filter(function(t){return t.uniqueID!==n});dt(i)}function dt(n){localStorage.setItem("ShoppingCart",JSON.stringify(n))}function gt(t){n.unshift(t);i()}function dt(n){localStorage.setItem("ShoppingCart",JSON.stringify(n))}function ni(t){for(var r=0;r<n.length;r++)if(n[r]){if(n[r].Jewel&&n[r].Jewel.toString().replace(/\D/g,"")==t.id.toString().replace(/\D/g,""))return n[r].Jewel=null,n[r].jewelCategory=null,s(),i(!0),!0;if(n[r].Diamonds&&n[r].Diamonds.toString().replace(/\D/g,"")==t.id.toString().replace(/\D/g,""))return n[r].Diamonds=null,n[r].diamondCategory=null,s(),i(!0),!0;if(n[r].GemStones&&n[r].GemStones.toString().replace(/\D/g,"")==t.id.toString().replace(/\D/g,""))return n[r].GemStones=null,n[r].gemstoneCategory=null,s(),i(!0),!0}return!1}function w(t){if(JSite.console.log("addProductToCart param : ",t),mobileShoppingCart.IsItemInCart(t.rock))if(t.jewel.id)mobileShoppingCart.removeFromCart(t.rock);else return t.itemInCartFunc(),!1;n.length>6?alert("Your Shopping cart is full, please remove some items to add more"):t.jewel.id&&t.rock.id?(n.push(wi(t.jewel,t.rock,t.specialDiamond,t.carePlanID)),i(!0),t.afterItemAddedFunc&&t.afterItemAddedFunc()):t.newMatchFunc&&t.newMatchFunc()}function b(n){switch(n.newItemType){case"Ring":case"Pendant":case"Earring":return Boolean(t.stone.id);default:return Boolean(t.jewel.id)}}function ti(){w({jewel:t.jewel,rock:t.stone,itemInCartFunc:function(){alert("This item can only be added once")},afterItemAddedFunc:function(){JSite.Hijax.Manager.Container="#MainContainer";JSite.Hijax.Manager.Load("shopping-cart/")},specialDiamond:t.stone.specialDiamond});t=tt?{}:t;i()}function ii(n){n.type=="Ring"?k():d();JSite.Hijax.Manager.Container="#MainContainer";var t=n.funnelItem.galleryUrl;t=t||JSite.Hijax.Manager.Current;t=t.replace("//","/");n.funnelItem.galleryUrl||(t=JSite.Hijax.Manager.Current);JSite.Hijax.Manager.Load(t)}function k(){t.jewel={type:"Ring",galleryUrl:"engagement-rings/all-settings/"};i()}function d(){t.stone={type:"Diamond",galleryUrl:"loose-diamonds/all-diamonds/"};i()}function ri(n){var r="https://ion.r2net.com/";t.jewel={id:n.jewel.id,type:n.jewel.type,price:n.jewel.price,salePrice:n.jewel.salePrice,smallImage:n.jewel.smallImage.indexOf("http")>-1?n.jewel.smallImage:r+n.jewel.smallImage,url:n.jewel.url,galleryUrl:n.jewel.galleryUrl,diamondRange:n.jewel.diamondRange,byChristmas:n.jewel.byChristmas,byNewYears:n.jewel.byNewYears,byValentines:n.jewel.byValentines};t.stone={id:n.stone.id,type:n.stone.type,price:n.stone.price,smallImage:n.stone.smallImage.indexOf("http")>-1?n.stone.smallImage:r+n.stone.smallImage,url:n.stone.url,galleryUrl:n.stone.galleryUrl,stoneShape:n.stone.stoneShape,stoneCarat:n.stone.stoneCarat,specialDiamond:n.stone.specialDiamond,isExpressShipping:n.stone.isExpressShipping};i()}function c(n,t,i){var r,n;return t=t.toLowerCase(),r=Object.keys(i).reduce(function(n,t){return n[t.toLowerCase()]=i[t],n},{}),t==="cushion modified"?t="cushion":t==="square emerald"?t="asscher":t==="square radiant"&&(t="radiant"),n=parseFloat(n),shapeRange=r?!!r[t]&&r[t]:!1,shapeRange&&parseFloat(shapeRange.minCarat)<=n&&parseFloat(shapeRange.maxCarat)>=n}function g(){var n=$("#DoNotMatch").data("item"),t=$("#DoNotMatch").data("diamondRange"),i=$("#DoNotMatch").data("stoneCarat"),r=$("#DoNotMatch").data("stoneShape"),u=$("#DoNotMatch").data("itemUrl");y({item:n,itemUrl:u,diamondRange:t,stoneShape:r,stoneCarat:i})}function ui(){t.stone.id&&d();g();JSite.Hijax.Manager.Container="#MainContainer";JSite.Hijax.Manager.Load(t.stone.galleryUrl)}function fi(){t.jewel.id&&k();g();JSite.Hijax.Manager.Container="#MainContainer";JSite.Hijax.Manager.Load(t.jewel.galleryUrl)}function y(n){switch(n.item.type){case"Ring":case"Pendant":case"Earring":case"Jewel":if(t.stone.id&&!c(t.stone.stoneCarat,t.stone.stoneShape,n.diamondRange))return showMobilePopup($("#DoNotMatch").data("item",n.item).data("diamondRange",n.diamondRange).data("itemUrl",n.itemUrl)),!1;t.jewel={id:n.item.id,type:n.item.type,price:n.item.price,salePrice:n.item.salePrice,smallImage:n.item.smallImage,url:n.itemUrl,galleryUrl:n.galleryUrl,diamondRange:n.diamondRange};break;case"diamondPair":if(t.jewel.id&&!c(n.stoneCarat,n.stoneShape,t.jewel.diamondRange))return showMobilePopup($("#DoNotMatch").data("item",n.item).data("stoneShape",n.stoneShape).data("stoneCarat",n.stoneCarat).data("itemUrl",n.itemUrl)),!1;t.stone={id:n.item.id,type:n.item.type,price:n.item.price,smallImage:n.item.smallImage,url:n.itemUrl,galleryUrl:n.galleryUrl,stoneShape:n.stoneShape,stoneCarat:n.stoneCarat,specialDiamond:n.specialDiamond};break;default:if(t.jewel.id&&!c(n.stoneCarat,n.stoneShape,t.jewel.diamondRange)){showMobilePopup($("#DoNotMatch").data("item",n.item).data("stoneShape",n.stoneShape).data("stoneCarat",n.stoneCarat).data("itemUrl",n.itemUrl));return}t.stone={id:n.item.id,type:n.item.type,price:n.item.price,smallImage:n.item.smallImage,url:n.itemUrl,galleryUrl:n.galleryUrl,stoneShape:n.stoneShape,stoneCarat:n.stoneCarat,specialDiamond:n.specialDiamond}}return i(),t.jewel.id&&t.stone.id&&(JSite.Hijax.Manager.Container="#MainContainer",JSite.Hijax.Manager.Load("complete-jewel/"),JA.GTMEvents.ECommerceAddToCartDesktop()),!0}function ei(t){var h;JSite.console.log(t);JSite.console.log("newAddItemToCart",t);var f=t.isPair,r=t.singleItem,u=t.item,e=l(u,f),o=!0;if(s(),r)if(!r&&e)p(u,e,f,t.specialDiamond);else{if(h=typeof window!="undefined"&&!!window.MSInputMethodContext&&!!document.documentMode,n.length>9||h&&n.length>6){alert("Your Shopping cart is full, please remove some items to add more");return}n.push(bi(u,r,t.specialDiamond))}else{if(o=window.MobileFunnel?MobileFunnel.AddToFunnel(t):y(t),!o)return;JSite.console.log("Add to funnel")}window.MobileFunnel?MobileFunnel.SaveCartCookie(n):i();r?t.afterSingleItemAddedFunc&&t.afterSingleItemAddedFunc():t.afterItemAddedFunc&&t.afterItemAddedFunc()}function nt(){for(var i=0,t=0;t<n.length;t++)n[t]&&(diamonds=n[t].Diamonds?n[t].Diamonds.split(","):"",gemstones=n[t].GemStones?n[t].GemStones.split(","):"",jewel=n[t].Jewel,i+=jewel&&jewel.length>0?1:0,n[t].Jewel||(i+=diamonds.length,i+=gemstones.length));return i}function oi(){return nt()<=0}function si(){return n}function o(n,t,i){this.cartIndex=n;this.itemID=t;this.count=i}function hi(){switch(mobileGallery.getFilteredKey()){case"Diamond":if($.cookie("DiamondRingMatchID"))return"diamond:"+$.cookie("DiamondRingMatchID");if($.cookie("GemstoneRingMatchID"))return"gemstone:"+$.cookie("GemstoneRingMatchID");break;case"Setting":if($.cookie("RingMatchID"))return"setting:"+$.cookie("RingMatchID");break;default:return null}}function l(n,t){var i=ItemsCategories.getCategoryByID(n.categoryID);switch(n.type.toLowerCase()){case"diamond":return t?r.Studs:r.Settings;case"diamondpair":return r.Studs;case"gemstone":case"gemstonepairs":return t?r.Studs:r.Settings;case"necklace":case"bracelet":case"earring":case"pendant":case"jewel":case"ring":return i&&i.diamondMatchType==2?r.DiamondsPair?r.DiamondsPair:r.GemstonesPair:r.Diamond;default:return null}}function a(i){var u,f,s,v;$.cookie("RingMatchID",null);$.cookie("DiamondRingMatchID",null);$.cookie("GemstoneRingMatchID",null);$.cookie("GemstonesStudsMatchID",null);$.cookie("StudsMatchID",null);$.cookie("DiamondsPairMatchID",null);r=[];var h=0,c=0,l=0,a=0,e=0;for(u=n.length-1;u>=0;u--)n[u]&&(i||!n[u].singleItem)&&(f=ItemsCategories.getCategoryByID(n[u].jewelCategory),n[u]&&f&&f.diamondMatchType==2&&n[u].Jewel&&!n[u].Diamonds&&!n[u].GemStones&&(h++,r.Studs=new o(u,parseInt(n[u].Jewel),h),n[u].singleItem||$.cookie("StudsMatchID",parseInt(n[u].Jewel))),n[u]&&!n[u].Jewel&&n[u].Diamonds&&n[u].Diamonds.indexOf(",")>-1&&!n[u].GemStones&&(c++,r.DiamondsPair=new o(u,parseInt(n[u].Diamonds),c),n[u].singleItem||$.cookie("DiamondRingMatchID",parseInt(n[u].Diamonds.split(",")[0]))),n[u]&&!n[u].Jewel&&!n[u].Diamonds&&n[u].GemStones&&f&&f.isPair()&&(l++,r.GemstonesPair=new o(u,parseInt(n[u].GemStones),l),n[u].singleItem||$.cookie("GemstonesStudsMatchID",parseInt(n[u].GemStones))),n[u]&&f&&f.diamondMatchType==1&&n[u].Jewel&&!n[u].Diamonds&&!n[u].GemStones&&(a++,r.Settings=new o(u,parseInt(n[u].Jewel),a),n[u].singleItem||$.cookie("RingMatchID",parseInt(n[u].Jewel))),n[u]&&!n[u].Jewel&&n[u].Diamonds&&!n[u].GemStones&&(e++,r.Diamond=new o(u,parseInt(n[u].Diamonds),e),n[u].singleItem||$.cookie("DiamondRingMatchID",parseInt(n[u].Diamonds))),n[u]&&!n[u].Jewel&&!n[u].Diamonds&&n[u].GemStones&&(e++,r.Diamond=new o(u,parseInt(n[u].GemStones),e),n[u].singleItem||$.cookie("GemstoneRingMatchID",parseInt(n[u].GemStones))));t.jewel&&t.jewel.id&&(!t.stone||!t.stone.id)&&$.cookie("RingMatchID",t.jewel.id);(!t.jewel||!t.jewel.id)&&t.stone&&t.stone.id&&(t.stone.type=="Diamond"?$.cookie("DiamondRingMatchID",t.stone.id):$.cookie("GemstoneRingMatchID",t.stone.id));$.cookie("FunnelDiamondRingMatchID")&&$.cookie("DiamondRingMatchID",$.cookie("FunnelDiamondRingMatchID"));$.cookie("FunnelGemstoneRingMatchID")&&$.cookie("GemstoneRingMatchID",$.cookie("FunnelGemstoneRingMatchID"));$.cookie("FunnelRingMatchID")&&$.cookie("RingMatchID",$.cookie("FunnelRingMatchID"));$.cookie("FunnelEarringMatchID")&&$.cookie("StudsMatchID",$.cookie("FunnelEarringMatchID"));$.cookie("FunnelDiamondsEarringMatchID")&&(s=$.cookie("FunnelDiamondsEarringMatchID"),v=s.substring(0,s.indexOf(",")).replace(/[^0-9\.]+/g,""),$.cookie("DiamondsPairMatchID",v));$.cookie("FunnelGemstonesEarringMatchID")&&$.cookie("GemstonesStudsMatchID",$.cookie("FunnelGemstonesEarringMatchID"));rt()}function p(t,i,r,u){switch(t.type.toLowerCase()){case"diamond":n[i.cartIndex].Diamonds=t.id;n[i.cartIndex].diamondCategory=t.categoryID;n[i.cartIndex].specialDiamond=u;break;case"earring":case"pendant":case"jewel":case"ring":n[i.cartIndex].Jewel=t.id;n[i.cartIndex].jewelCategory=t.categoryID;break;case"gemstone":case"gemstonepairs":n[i.cartIndex].GemStones=t.id;n[i.cartIndex].gemstoneCategory=t.categoryID}}function s(){n=$.grep(n,function(n){return n&&(n.Diamonds||n.GemStones||n.Jewel)});n||(n=[])}function tt(){n=[];localStorage.removeItem("ShoppingCart");i()}function ci(t){return!t||!t.id?!1:(itemsFound=$.grep(n,function(n){if(n)return diamonds=n.Diamonds?n.Diamonds.split(","):[],gemstones=n.GemStones?n.GemStones.split(","):[],jewel=n.Jewel,jewel==t.id.toString()||$.inArray(t.id.toString(),diamonds)!=-1||$.inArray(t.id.toString(),gemstones)!=-1}),itemsFound.length>0)}function li(){try{$.cookie("ShoppingCart")&&(n=$.cookie("ShoppingCart")?JSON.parse($.cookie("ShoppingCart")):[])}catch(t){console.log("cart json not correct and was deleted-2");$.cookie("ShoppingCart",[])}a()}function it(){for(var t=0;t<n.length;t++)n[t]&&(n[t].Jewel&&(n[t].Jewel=n[t].Jewel.toString().replace(/[^0-9,]/g,"")),n[t].Diamonds&&(n[t].Diamonds=n[t].Diamonds.toString().replace(/[^0-9,]/g,"")),n[t].GemStones&&(n[t].GemStones=n[t].GemStones.toString().replace(/[^0-9,]/g,"")))}function i(t,i){it();cartJson=n.length>0?JSON.stringify(n):[];var r=cartJson,u=cartJson?JSON.parse(localStorage.getItem("ShoppingCart")):[];$.cookie("ShoppingCart",r,ft);JSite.Hijax.Manager.UserID&&ai(i);a();window.RenderHeader&&window.RenderHeader({bagContainerStatus:!t});window.GetCartProductPromise&&window.GetCartProductPromise().then(function(n){JA.GoogleEE.PushUserMetaData(n);i&&JSite.Hijax.Manager.Reload()})}function ai(n){var t=JSON.parse(localStorage.getItem("ShoppingCart"));window.SaveShoppingCartToDB&&window.SaveShoppingCartToDB(t,n)}function vi(){for(var i=1,t=0;t<=n.length-1;t++)n[t]&&i<=parseInt(n[t].groupID)&&(i=parseInt(n[t].groupID)+1);return i}function yi(n,t,i){t=="FunnelDiamondRingMatchID"?$.cookie("FunnelGemstoneRingMatchID",null):t=="FunnelGemstoneRingMatchID"?$.cookie("FunnelDiamondRingMatchID",null):t=="FunnelDiamondsEarringMatchID"?($.cookie("FunnelGemstonesEarringMatchID",null),$.cookie("FunnelGemstoneRingMatchID",null),$.cookie("FunnelDiamondRingMatchID",null)):t=="FunnelGemstonesEarringMatchID"&&($.cookie("FunnelDiamondsEarringMatchID",null),$.cookie("FunnelGemstoneRingMatchID",null),$.cookie("FunnelDiamondRingMatchID",null));$.cookie("groupchange",n);$.cookie(t,i);t=="FunnelEarringMatchID"?$.cookie("FunnelType","Earrings"):$.cookie("FunnelType","Ring")}function pi(n,t,i,r){$.cookie("groupchange",n);$.cookie(t,i);r!=undefined&&JSite.Hijax.Manager.Load(r,"#WidePane",function(){})}function f(n,t,i,r,u,f,e,o,s){this.Diamonds=n;this.GemStones=t;this.Jewel=i;this.singleItem=r;this.jewelCategory=u;this.diamondCategory=f;this.gemstoneCategory=e;this.groupID=vi();this.coupon="";this.specialDiamond=o;this.carePlanID=s}function wi(n,t,i,r){var u;switch(t.type.toLowerCase()){case"diamond":u=new f(t.id,null,n.id,null,n.categoryID,t.categoryID,null,i,r,e(n.productID,t.productID,undefined,undefined));break;case"gemstone":case"gemstonepairs":u=new f(null,t.id,n.id,null,n.categoryID,null,t.categoryID,null,r,e(n.productID,undefined,t.productID,undefined));break;case"diamondpair":u=new f(t.id,null,n.id,null,n.categoryID,null,null,i,r,e(n.productID,undefined,undefined,t.productID))}return JSite.console.log("newCartMatch",u),u}function e(n,t,i,r){return{jewel:n,stone:t||i||r}}function bi(n,t,i,r){t=t?t:null;var u;switch(n.type.toLowerCase()){case"RingSetting".toLowerCase():case"WeddingRing".toLowerCase():case"necklace":case"bracelet":case"earring":case"pendant":case"jewel":case"ring":u=new f(null,null,n.id,t,n.categoryID,null,null,null,r,e(n.productID,undefined,undefined,undefined));break;case"gemstonepair":case"gemstonepairs":case"gemstone":u=new f(null,n.id,null,t,n.categoryID,null,null,null,r,e(undefined,undefined,n.productID,undefined));break;case"diamondpair":u=new f(n.id,null,null,t,null,n.categoryID,null,i,r,e(undefined,undefined,undefined,n.productID));JSite.console.log("newCartMatch",u);break;case"diamond":u=new f(n.id,null,null,t,null,n.categoryID,null,i,r,e(undefined,n.productID,undefined,undefined));JSite.console.log("newCartMatch",u)}return u}function rt(){$.cookie("RingMatchID")!=null||$.cookie("DiamondRingMatchID")!=null||$.cookie("GemstoneRingMatchID")!=null||$.cookie("GemstonesStudsMatchID")!=null||$.cookie("StudsMatchID")!=null||$.cookie("DiamondsPairMatchID")!=null?(JSite.IsCookieableUrls.forEach(function(n){$.cookie("isCookieable","true",{path:n})}),JSite.Storage.SetString("isCookieable","true")):($.cookie("isCookieable",null),JSite.Storage.SetString("isCookieable",null))}function ut(){try{var n=JSON.parse(localStorage.getItem("ShoppingCart"))}catch(t){return console.log("wishlist json not correct and was deleted"),localStorage.setItem("ShoppingCart",JSON.stringify([])),{}}return n?n:{}}function ki(n){if(!n||!n.concatProductsID)return!1;const i=typeof n.type=="object"?getItemCategoryName(n.type):n.type;var t=ut();return Object.keys(t).length?!!(t[i]&&t[i].find(function(t){return t.concatProductsID===n.concatProductsID})):!1}function di(n){console.log("wishlist on toggle",n);var t=typeof n.item.type=="object"?getItemCategoryName(n.item.type):n.item.type;Object.defineProperty(n.item,"type",{value:t});isItemInWishlist(n.item)?(v.removeFromWishList(n.item),n.afterRemovedFunc&&n.afterRemovedFunc()):(v.addToWishList(n.item),n.afterAddedFunc&&n.afterAddedFunc());n.afterToggleFunc&&n.afterToggleFunc();window.RenderHeader&&window.RenderHeader();window.GetCartProductPromise().then(function(n){JA.GoogleEE.PushUserMetaData(n)})}function gi(n){localStorage.setItem("ShoppingCart",JSON.stringify(n))}function nr(){if(mobileShoppingCart.LoadFromCookie(),Checkout&&Checkout.initCheckoutData(),Checkout&&Checkout.saveCheckoutDataItems($("checkoutdata items")),$("checkoutdata").length>0){var n=$("checkoutdata");$.cookie("mobileCartXml",$(n).html());JSite.console.log("orderDetails:",n)}}var v={clearCart:function(){tt()},getMatchToUpdate:function(n,t){return l(n,t)},IsItemInCart:function(n){return ci(n)},isCartEmpty:function(){return oi()},getCart:function(){return si()},getFilterItemText:function(){return hi()},getMatches:function(){return r},getItemsAmount:function(){return nt()},NewAddItemToCart:function(n){ei(n)},AddProductToCart:function(n){w(n)},SelectThisItem:function(n){at(n)},removeFromCart:function(n){return ni(n)},updateCartInscription:function(n,t,i){return pt(n,t,i)},updateCartCoupon:function(n){return wt(n)},removeGroupFromCart:function(n,t,i){return bt(n,t,i)},UpdateCartGroup:function(n){yt(n)},ChangeShopItem:function(n,t,i,r){return pi(n,t,i,r)},SetShopItem:function(n,t,i){return yi(n,t,i)},saveToCookie:function(){i()},LoadFromCookie:function(){li()},InitCartDetails:function(){lt()},GetCartDetails:function(){return u},GetCartItemDetails:vt,SetSettingsMatchID:a,RemoveLettersFromItemIDs:it,CheckForSingleItems:ct,CombineCartItems:ht,FinishCombineCartItems:st,GetFunnelData:function(){return t},RemoveFromFunnel:ii,GetFunnelTypeByUrl:function(){return et},FunnelMatchExists:b,AddFunnelToCart:ti,InitFunnelData:ri,StoneNotMatch:ui,JewelNotMatch:fi,InsertToCart:gt,GetCartIDs:ot,StoneJewelFit:c,CheckCacheCookie:rt,GetLocalStorageShoppingCartJson:ut,IsItemInShoppingCart:ki,ToggleShoppingCartItem:di,SaveToLocalStorage:gi,init:function(){nr()}},t={},ft=location.href.indexOf("jamesallen.com")>-1?{expires:365,domain:".jamesallen.com"}:{expires:365},n=[],r=[],tr=JSite.WebService.WSClient("ShoppingCart.asmx"),u={},et=[{url:"/complete-jewel/",type:"Complete",title:"Complete",funnelStep:"complete"},{url:"/engagement-rings/",type:"Ring",title:"Setting",funnelStep:"setting"},{url:"fine-jewelry/design-your-own-pendants/",type:"Pendant",title:"Pendant",funnelStep:"setting"},{url:"fine-jewelry/design-your-own-studs/",type:"Earring",title:"Earring",funnelStep:"setting"},{url:"/gemstones/",type:"Gemstone",title:"Gemstone",funnelStep:"stone"},{url:"/loose-diamonds/",type:"Diamond",title:"Diamond",funnelStep:"stone"},{url:"fancy-color-diamonds/",type:"Diamond",title:"Diamond",funnelStep:"stone"},{url:"/matching-pairs/all-diamonds/",type:"DiamondPair",title:"Diamond Pairs",funnelStep:"stone"}];return v}();
/*!! ver.1.1 CurrencyHeader.js */
(function(n,t){n.Currency=function(){return{InitSelectbox:function(){var i=t('#selectCurrencyOptions a[code="'+JSite.Hijax.Currency.Code.trim()+'"]');t("#selectCurrency > a").html(i.html()+'<div id="bigArrowDown"><\/div>');t("#selectCurrency > a > span").attr("class",JSite.Hijax.Currency.Code.trim());t("#selectCurrency a").click(function(n){n.stopPropagation();t("#selectCurrencyOptions").fadeIn()});t("#selectCurrencyOptions a").click(function(){t("#selectCurrency > a").html(t(this).html()+'<div id="bigArrowDown"><\/div>');t("#selectCurrencyOptions").fadeOut();t("#selectCurrency > a > span").attr("class",t(this).attr("code"));JSite.Hijax.Currency.Code=t(this).attr("code");JSite.Hijax.Currency.Rate=t(this).attr("rate");JSite.Hijax.Currency.Symbol=t(this).attr("symbol");JSite.Hijax.Currency.IsUserSelection=!0;JSite.Hijax.Currency.SaveToCookie();var n=window.location.pathname+window.location.search;n.indexOf("?cur=")>-1&&(n=n.substring(0,n.indexOf("?cur=")));window.location.href=n});t(".Dropdown.Currency .Selected a span:first-child").attr("class",JSite.Hijax.Currency.Code);t(".Dropdown.Currency .Selected a span:last-child").html(JSite.Hijax.Currency.Code);t(".Dropdown.Currency .Options a:first-child").before(t(".Dropdown.Currency .Options a[data-code="+JSite.Hijax.Currency.Code+"]").remove());t(".Currency.Dropdown .Options > a").click(n.Currency.ChangeRate)},ChangeRate:function(n,i,r,u){JSite.Hijax.Currency.Code=i||t(this).data("code");JSite.Hijax.Currency.Rate=r||t(this).data("rate");JSite.Hijax.Currency.Symbol=u||t(this).data("symbol");t(".Dropdown.Currency .Selected a span:first-child").attr("class",JSite.Hijax.Currency.Code);t(".Dropdown.Currency .Selected a span:last-child").html(JSite.Hijax.Currency.Code);t(".Dropdown.Currency .Options a:first-child").before(t(".Dropdown.Currency .Options a[data-code="+JSite.Hijax.Currency.Code+"]").remove());JSite.Hijax.Currency.IsUserSelection=!0;JSite.Hijax.Currency.SaveToCookie();JSite.Hijax.Manager.Reload()}}}()})(window.JamesAllen=window.JamesAllen||{},jQuery);
/*!! ver.1.1 JA.Common.js */
(function(n){(function(){var n=navigator.userAgent;(n.indexOf("iPad")>-1||n.indexOf("iPhone")>-1||n.indexOf("Android")>-1)&&JSite.Hijax.OnLoad(function(){});window.devAlert=function(n){(window.location.href.indexOf("localhost")>-1||window.location.href.indexOf("dev.")>-1)&&alert(n)};JSite.reportError=function(n,t){JamesAllen.WSAccount("InsertLog404",{url:n,JSONLog:t})}})(n.Common=n.Common||{})})(window.JA=window.JA||{},jQuery);
/*!! ver.1.1 ShoppingCart.js */
(function(n,t,i){n.ShoppingCartPage=function(){function l(){dataLayer.push({event:"CombineCartItemsChat"});t(".ChatNow").click()}function a(){var n=window.open("","Image","resizable=yes,...");n.document&&(n.document.writeln("111"),n.document.close(),n.focus(),n.print())}function v(){var r="";if(t(".FunnelRingSizeContainer").each(function(n,i){var s=t(i),i=s.find("ul"),e=i.data("min"),o=i.data("max"),u=i.data("step"),n;for(r=i.data("jewelid"),e=parseFloat(e),o=parseFloat(o),u=parseFloat(u),u=Math.round(u*2)/2,n=e;n<=o;n+=u)i.append(t("<li>"+n+"<\/li>"));i.find("li").click(function(){var n=t(this).parent().parent(),r=n.find("[id^=ItemRingSize_]").data("jewelid"),i=t(this).html();t.cookie("FunnelRingSize_"+r,i);n.closest(".DropDownFilter").removeClass("redBorder");t(this).data("value",i);n.find("#selectedRingSize").html(i);t(".FunnelRingSizeContainer *:focus").blur();f()})}),t("#ItemRingSize").length>0){var n=t("#ItemRingSize"),u=n.data("min"),e=n.data("max"),o=n.data("step"),i=t.cookie("FunnelRingSize_"+r);i&&(t("#ItemRingSize").data("value",i),t("#selectedRingSize").html(i));t(".FunnelRingSizeContainer #ItemRingSize li").click(function(){itemid=getJewelId();t.cookie("FunnelRingSize_"+itemid,t(this).html());t.cookie("FunnelRingSize",t(this).html());t(".RingSizeContainer").removeClass("Missing");t("#ItemRingSize").data("value",t(this).html());t("#selectedRingSize").html(t(this).html());t(".FunnelRingSizeContainer *:focus").blur()})}}function y(){JA.GoogleEE.BasketDataLayer();var r,i;v();e();p();n.CarePlan.Init();t("#inscriptor").length>0&&n.Checkout.InitInscriptionHtml5();t("#inscriptor .small-new-button").click(function(){var n=t(".Inscription").find(".message"),r=t(".Inscription").find(".font_1").hasClass("selected")?"font_1":"font_2";o(i);e();t("#inscriptor").hide("slow")});t(".coupon .bigButton").click(function(){t("#coupon-code").val()!=""&&(mobileShoppingCart.updateCartCoupon(t("#coupon-code").val()),n.Checkout.checkoutTempDetails.coupon=t("#coupon-code").val(),s(),JSite.Hijax.Manager.Load("shopping-cart/"))});t("#btnFinishFunnel").click(function(){var r=0,i;t("#selectedRingSize").length>0&&t(".FunnelRingSizeContainer").each(function(n,i){var u=t(i).find("#selectedRingSize").html();u=="Ring size"&&r++});i=FeatureSupport.IsStore=="True"?"fast-checkout/":"shop_bag_billing/";!0&&(n.Main.showMainLoader(),n.Checkout.CheckAvailableCartDiamonds(i,function(){n.Main.showHideCart()}))});t(".InscriptionOpt .remove").click(function(){t(this).closest("li").attr("payment")=="Coupon"&&(t("#Checkout #OrderSummary #OrderResults li span.Price.NewPrice").hide(),t('#Checkout #OrderSummary .TotalOptions .Coupon input[type="text"]').val(""),saveCoupon());t(this).parent().find(".remove").hide();t(this).parent().find(".added").hide();t(this).parent().find(".Result").show();t(this).parent().find(".NewTitle").hide();o(t(this).parent().attr("itemid"))});t(".InscriptionOpt .Result").click(function(){objid=t(this).parent().attr("id");r=objid.split("_")[1];i=t(this).parent().attr("itemid");t("#inscriptor").show()});n.SplitIt.SetSplitIt();f()}function p(){var n=t.cookie("ShoppingCart")&&JSON.parse(t.cookie("ShoppingCart"));n&&n.length>0&&n.map(function(n){var i=n.groupID;n.carePlans&&t(".ItemRow[data-item-group-id='"+i+"'] .care-plan .cb").prop("checked",!0)})}function f(){window.RenderShipsBy&&window.RenderShipsBy()}function e(){t(".ItemRow").each(function(r,u){itemid=t(u).find("input[name=ItemID]").val();var f=n.Checkout.checkoutTempDetails["inscription"+itemid],e=n.Checkout.checkoutTempDetails["inscription"+itemid+"Font"];f!=i&&(t(this).find(".added").html(f).show(),t(this).find(".remove").show(),t(this).find(".Result").hide(),t(this).find(".NewTitle").css("display","inline"))})}function o(i){var r=i,u=t(".Inscription").find(".message").val(),f=t(".Inscription").find(".font_1").hasClass("selected")?"font_1":"font_2";n.Checkout.checkoutTempDetails["inscription"+r]=u;n.Checkout.checkoutTempDetails["inscription"+r+"Font"]=f;n.Checkout.checkoutTempDetails["inscription"+r]==""&&(n.Checkout.checkoutTempDetails["inscription"+r]=null,n.Checkout.checkoutTempDetails["inscription"+r+"Font"]=null);s()}function s(){var i=new Date;i.setTime(i.getTime()+36e5);t.cookie("checkoutTempDetails",JSON.stringify(n.Checkout.checkoutTempDetails),{expires:i})}function w(n){t.cookie(n,null);var i=n;i=i.replace("Funnel","");t.cookie(i,null);mobileShoppingCart.CheckCacheCookie()}function b(i){var r,o,f,e;GazitIt.VideoPlayer.removeActivePlayers();r=i.displayType;o=t("#SegomaItemCanvas").parent();o.html(u);t(".StagePreloaderImg").attr("src","https://ion.r2net.com/"+i.img);r=="StageSegomaSoldJewel"?(t("#SegomaItemCanvas").removeClass("brio").addClass("segoma"),t("#actualText").show()):(t("#SegomaItemCanvas").removeClass("segoma").addClass("brio"),t("#actualText").hide());f=navigator.userAgent;(f.indexOf("iPad")>-1||f.indexOf("iPhone")>-1||f.indexOf("Android")>-1)&&(JA.Video.Settings[r].server.setsNum=8);e=i.setFolder;e.indexOf(".txt")>-1&&(e+="?gpu=",JA.Video.Settings[r].server.setsNum=1);JA.Video.Settings[r].server.folder=i.setFolder;n.LooseDiamonds.AllVideos.push(GazitIt.VideoPlayer.createNewVideoplayer(JA.Video.Settings[r]))}var u,c={Init:function(){y()},DisplaySet:function(n){k(n)},Change:function(n,t){w(n,t)},OpenWin:function(n){a(n)},ChatClick:l},r=0,k=function(n){var i=t(n).data("display-type");t("#SoldGallery li img").removeClass("selected");t(n).find("img").addClass("selected");b({displayType:i,img:t(n).data("image"),setFolder:t(n).data("set")});t("#FunnelPreview").css("height","430");t("#FunnelPreview").show()};return c}()})(window.JamesAllen=window.JamesAllen||{},jQuery)